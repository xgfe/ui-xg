/*
 AngularJS v1.2.25
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(F,e,O){'use strict';e.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(G,s,g){g=g.ngAnimateChildren;e.isString(g)&&0===g.length?s.data("$$ngAnimateChildren",!0):G.$watch(g,function(e){s.data("$$ngAnimateChildren",!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,s){return function(g){return e(function(){g()})}}]).config(["$provide","$animateProvider",function(G,s){function g(e){for(var g=0;g<e.length;g++){var l=e[g];if(l.nodeType==aa)return l}}
function B(l){return e.element(g(l))}var m=e.noop,u=e.forEach,P=s.$$selectors,aa=1,l="$$ngAnimateState",V="$$ngAnimateChildren",J="ng-animate",n={running:!0};G.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(z,F,$,R,E,H,O){function K(a){var b=a.data(l)||{};b.running=!0;a.data(l,b)}function L(a){if(a){var b=[],c={};a=a.substr(1).split(".");($.transitions||$.animations)&&b.push(F.get(P[""]));for(var d=0;d<a.length;d++){var f=
a[d],e=P[f];e&&!c[f]&&(b.push(F.get(e)),c[f]=!0)}return b}}function G(a,b,c){function d(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];if(c||d)return"leave"==b&&(d=c,c=null),n.push({event:b,fn:c}),h.push({event:b,fn:d}),!0}function f(b,d,e){var f=[];u(b,function(a){a.fn&&f.push(a)});var g=0;u(f,function(b,l){var C=function(){a:{if(d){(d[l]||m)();if(++g<f.length)break a;d=null}e()}};switch(b.event){case "setClass":d.push(b.fn(a,A,k,C));break;case "addClass":d.push(b.fn(a,A||c,
C));break;case "removeClass":d.push(b.fn(a,k||c,C));break;default:d.push(b.fn(a,C))}});d&&0===d.length&&e()}var g=a[0];if(g){var l="setClass"==b,p=l||"addClass"==b||"removeClass"==b,A,k;e.isArray(c)&&(A=c[0],k=c[1],c=A+" "+k);var x=a.attr("class")+" "+c;if(M(x)){var t=m,w=[],h=[],q=m,y=[],n=[],x=(" "+x).replace(/\s+/g,".");u(L(x),function(a){!d(a,b)&&l&&(d(a,"addClass"),d(a,"removeClass"))});return{node:g,event:b,className:c,isClassBased:p,isSetClassOperation:l,before:function(a){t=a;f(h,w,function(){t=
m;a()})},after:function(a){q=a;f(n,y,function(){q=m;a()})},cancel:function(){w&&(u(w,function(a){(a||m)(!0)}),t(!0));y&&(u(y,function(a){(a||m)(!0)}),q(!0))}}}}}function r(a,b,c,d,f,g,n){function p(d){var e="$animate:"+d;q&&(q[e]&&0<q[e].length)&&E(function(){c.triggerHandler(e,{event:a,className:b})})}function A(){p("before")}function m(){p("after")}function x(){p("close");n&&E(function(){n()})}function t(){t.hasBeenRun||(t.hasBeenRun=!0,g())}function w(){if(!w.hasBeenRun){w.hasBeenRun=!0;var d=
c.data(l);d&&(h&&h.isClassBased?k(c,b):(E(function(){var d=c.data(l)||{};r==d.index&&k(c,b,a)}),c.data(l,d)));x()}}var h=G(c,a,b);if(h){b=h.className;var q=e.element._data(h.node),q=q&&q.events;d||(d=f?f.parent():c.parent());var y=c.data(l)||{};f=y.active||{};var z=y.totalActive||0,C=y.last,D;h.isClassBased&&(D=y.running||y.disabled||C&&!C.isClassBased);if(D||N(c,d))t(),A(),m(),w();else{d=!1;if(0<z){D=[];if(h.isClassBased)"setClass"==C.event?(D.push(C),k(c,b)):f[b]&&(v=f[b],v.event==a?d=!0:(D.push(v),
k(c,b)));else if("leave"==a&&f["ng-leave"])d=!0;else{for(var v in f)D.push(f[v]),k(c,v);f={};z=0}0<D.length&&u(D,function(a){a.cancel()})}!h.isClassBased||(h.isSetClassOperation||d)||(d="addClass"==a==c.hasClass(b));if(d)t(),A(),m(),x();else{if("leave"==a)c.one("$destroy",function(a){a=e.element(this);var b=a.data(l);b&&(b=b.active["ng-leave"])&&(b.cancel(),k(a,"ng-leave"))});c.addClass(J);var r=Y++;z++;f[b]=h;c.data(l,{last:h,active:f,index:r,totalActive:z});A();h.before(function(d){var e=c.data(l);
d=d||!e||!e.active[b]||h.isClassBased&&e.active[b].event!=a;t();!0===d?w():(m(),h.after(w))})}}}else t(),A(),m(),w()}function T(a){if(a=g(a))a=e.isFunction(a.getElementsByClassName)?a.getElementsByClassName(J):a.querySelectorAll("."+J),u(a,function(a){a=e.element(a);(a=a.data(l))&&a.active&&u(a.active,function(a){a.cancel()})})}function k(a,b){if(g(a)==g(R))n.disabled||(n.running=!1,n.structural=!1);else if(b){var c=a.data(l)||{},d=!0===b;!d&&(c.active&&c.active[b])&&(c.totalActive--,delete c.active[b]);
if(d||!c.totalActive)a.removeClass(J),a.removeData(l)}}function N(a,b){if(n.disabled)return!0;if(g(a)==g(R))return n.running;var c,d,f;do{if(0===b.length)break;var m=g(b)==g(R),k=m?n:b.data(l)||{};if(k.disabled)return!0;m&&(f=!0);!1!==c&&(m=b.data(V),e.isDefined(m)&&(c=m));d=d||k.running||k.last&&!k.last.isClassBased}while(b=b.parent());return!f||!c&&d}var Y=0;R.data(l,n);H.$$postDigest(function(){H.$$postDigest(function(){n.running=!1})});var Q=s.classNameFilter(),M=Q?function(a){return Q.test(a)}:
function(){return!0};return{enter:function(a,b,c,d){a=e.element(a);b=b&&e.element(b);c=c&&e.element(c);K(a);z.enter(a,b,c);H.$$postDigest(function(){a=B(a);r("enter","ng-enter",a,b,c,m,d)})},leave:function(a,b){a=e.element(a);T(a);K(a);H.$$postDigest(function(){r("leave","ng-leave",B(a),null,null,function(){z.leave(a)},b)})},move:function(a,b,c,d){a=e.element(a);b=b&&e.element(b);c=c&&e.element(c);T(a);K(a);z.move(a,b,c);H.$$postDigest(function(){a=B(a);r("move","ng-move",a,b,c,m,d)})},addClass:function(a,
b,c){a=e.element(a);a=B(a);r("addClass",b,a,null,null,function(){z.addClass(a,b)},c)},removeClass:function(a,b,c){a=e.element(a);a=B(a);r("removeClass",b,a,null,null,function(){z.removeClass(a,b)},c)},setClass:function(a,b,c,d){a=e.element(a);a=B(a);r("setClass",[b,c],a,null,null,function(){z.setClass(a,b,c)},d)},enabled:function(a,b){switch(arguments.length){case 2:if(a)k(b);else{var c=b.data(l)||{};c.disabled=!0;b.data(l,c)}break;case 1:n.disabled=!a;break;default:a=!n.disabled}return!!a}}}]);s.register("",
["$window","$sniffer","$timeout","$$animateReflow",function(l,n,s,B){function E(a,U){S&&S();W.push(U);S=B(function(){u(W,function(a){a()});W=[];S=null;v={}})}function H(a,U){var b=g(a);a=e.element(b);Z.push(a);b=Date.now()+U;b<=da||(s.cancel(ca),da=b,ca=s(function(){G(Z);Z=[]},U,!1))}function G(a){u(a,function(a){(a=a.data(q))&&(a.closeAnimationFn||m)()})}function K(a,b){var c=b?v[b]:null;if(!c){var d=0,e=0,f=0,g=0,m,k,h,q;u(a,function(a){if(a.nodeType==aa){a=l.getComputedStyle(a)||{};h=a[I+P];d=
Math.max(L(h),d);q=a[I+x];m=a[I+t];e=Math.max(L(m),e);k=a[p+t];g=Math.max(L(k),g);var b=L(a[p+P]);0<b&&(b*=parseInt(a[p+w],10)||1);f=Math.max(b,f)}});c={total:0,transitionPropertyStyle:q,transitionDurationStyle:h,transitionDelayStyle:m,transitionDelay:e,transitionDuration:d,animationDelayStyle:k,animationDelay:g,animationDuration:f};b&&(v[b]=c)}return c}function L(a){var b=0;a=e.isString(a)?a.split(/\s*,\s*/):[];u(a,function(a){b=Math.max(parseFloat(a)||0,b)});return b}function J(a){var b=a.parent(),
c=b.data(h);c||(b.data(h,++ba),c=ba);return c+"-"+g(a).getAttribute("class")}function r(a,b,c,d){var e=J(b),f=e+" "+c,l=v[f]?++v[f].total:0,k={};if(0<l){var h=c+"-stagger",k=e+" "+h;(e=!v[k])&&b.addClass(h);k=K(b,k);e&&b.removeClass(h)}d=d||function(a){return a()};b.addClass(c);var h=b.data(q)||{},n=d(function(){return K(b,f)});d=n.transitionDuration;e=n.animationDuration;if(0===d&&0===e)return b.removeClass(c),!1;b.data(q,{running:h.running||0,itemIndex:l,stagger:k,timings:n,closeAnimationFn:m});
a=0<h.running||"setClass"==a;0<d&&T(b,c,a);0<e&&(0<k.animationDelay&&0===k.animationDuration)&&(g(b).style[p]="none 0s");return!0}function T(a,b,c){"ng-enter"!=b&&("ng-move"!=b&&"ng-leave"!=b)&&c?a.addClass(y):g(a).style[I+x]="none"}function k(a,b){var c=I+x,d=g(a);d.style[c]&&0<d.style[c].length&&(d.style[c]="");a.removeClass(y)}function N(a){var b=p;a=g(a);a.style[b]&&0<a.style[b].length&&(a.style[b]="")}function Y(a,b,d,e){function k(a){b.off(x,l);b.removeClass(m);c(b,d);a=g(b);for(var e in s)a.style.removeProperty(s[e])}
function l(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||b.timeStamp||Date.now();b=parseFloat(b.elapsedTime.toFixed(V));Math.max(a-z,0)>=y&&b>=v&&e()}var h=g(b);a=b.data(q);if(-1!=h.getAttribute("class").indexOf(d)&&a){var m="";u(d.split(" "),function(a,b){m+=(0<b?" ":"")+a+"-active"});var n=a.stagger,p=a.timings,t=a.itemIndex,v=Math.max(p.transitionDuration,p.animationDuration),w=Math.max(p.transitionDelay,p.animationDelay),y=w*D,z=Date.now(),x=A+" "+X,r="",s=[];if(0<p.transitionDuration){var B=
p.transitionPropertyStyle;-1==B.indexOf("all")&&(r+=f+"transition-property: "+B+";",r+=f+"transition-duration: "+p.transitionDurationStyle+";",s.push(f+"transition-property"),s.push(f+"transition-duration"))}0<t&&(0<n.transitionDelay&&0===n.transitionDuration&&(r+=f+"transition-delay: "+Q(p.transitionDelayStyle,n.transitionDelay,t)+"; ",s.push(f+"transition-delay")),0<n.animationDelay&&0===n.animationDuration&&(r+=f+"animation-delay: "+Q(p.animationDelayStyle,n.animationDelay,t)+"; ",s.push(f+"animation-delay")));
0<s.length&&(p=h.getAttribute("style")||"",h.setAttribute("style",p+"; "+r));b.on(x,l);b.addClass(m);a.closeAnimationFn=function(){k();e()};h=(t*(Math.max(n.animationDelay,n.transitionDelay)||0)+(w+v)*C)*D;a.running++;H(b,h);return k}e()}function Q(a,b,c){var d="";u(a.split(","),function(a,e){d+=(0<e?",":"")+(c*b+parseInt(a,10))+"s"});return d}function M(a,b,d,e){if(r(a,b,d,e))return function(a){a&&c(b,d)}}function a(a,b,d,e){if(b.data(q))return Y(a,b,d,e);c(b,d);e()}function b(b,c,d,e){var f=M(b,
c,d);if(f){var g=f;E(c,function(){k(c,d);N(c);g=a(b,c,d,e)});return function(a){(g||m)(a)}}e()}function c(a,b){a.removeClass(b);var c=a.data(q);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(q))}function d(a,b){var c="";a=e.isArray(a)?a:a.split(/\s+/);u(a,function(a,d){a&&0<a.length&&(c+=(0<d?" ":"")+a+b)});return c}var f="",I,X,p,A;F.ontransitionend===O&&F.onwebkittransitionend!==O?(f="-webkit-",I="WebkitTransition",X="webkitTransitionEnd transitionend"):(I="transition",X="transitionend");
F.onanimationend===O&&F.onwebkitanimationend!==O?(f="-webkit-",p="WebkitAnimation",A="webkitAnimationEnd animationend"):(p="animation",A="animationend");var P="Duration",x="Property",t="Delay",w="IterationCount",h="$$ngAnimateKey",q="$$ngAnimateCSS3Data",y="ng-animate-block-transitions",V=3,C=1.5,D=1E3,v={},ba=0,W=[],S,ca=null,da=0,Z=[];return{enter:function(a,c){return b("enter",a,"ng-enter",c)},leave:function(a,c){return b("leave",a,"ng-leave",c)},move:function(a,c){return b("move",a,"ng-move",
c)},beforeSetClass:function(a,b,c,e){var f=d(c,"-remove")+" "+d(b,"-add"),g=M("setClass",a,f,function(d){var e=a.attr("class");a.removeClass(c);a.addClass(b);d=d();a.attr("class",e);return d});if(g)return E(a,function(){k(a,f);N(a);e()}),g;e()},beforeAddClass:function(a,b,c){var e=M("addClass",a,d(b,"-add"),function(c){a.addClass(b);c=c();a.removeClass(b);return c});if(e)return E(a,function(){k(a,b);N(a);c()}),e;c()},setClass:function(b,c,e,f){e=d(e,"-remove");c=d(c,"-add");return a("setClass",b,
e+" "+c,f)},addClass:function(b,c,e){return a("addClass",b,d(c,"-add"),e)},beforeRemoveClass:function(a,b,c){var e=M("removeClass",a,d(b,"-remove"),function(c){var d=a.attr("class");a.removeClass(b);c=c();a.attr("class",d);return c});if(e)return E(a,function(){k(a,b);N(a);c()}),e;c()},removeClass:function(b,c,e){return a("removeClass",b,d(c,"-remove"),e)}}}])}])})(window,window.angular);

/**
 * State-based routing for AngularJS
 * @version v0.2.15
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return N(new(N(function(){},{prototype:a})),b)}function e(a){return M(arguments,function(b){b!==a&&M(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var b=[];return M(a,function(a,c){b.push(c)}),b}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return N({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return M(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return M(c,function(c){c in a&&(b[c]=a[c])}),b}function m(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function n(a,b){var c=L(a),d=c?[]:{};return M(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function o(a,b){var c=L(a)?[]:{};return M(a,function(a,d){c[d]=b(a,d)}),c}function p(a,b){var d=1,f=2,i={},j=[],k=i,l=N(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,J(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);M(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return K(a)&&a.then&&a.$$promises}if(!K(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return M(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!H(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;M(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!K(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=l;var n=a.defer(),r=n.promise,s=r.$$promises={},t=N({},d),u=1+q.length/3,v=!1;if(H(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,m(f.$$inheritedValues,p)),N(s,f.$$promises),f.$$values?(v=e(t,m(f.$$values,p)),r.$$inheritedValues=m(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=m(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function q(a,b,c){this.fromConfig=function(a,b,c){return H(a.template)?this.fromString(a.template,b):H(a.templateUrl)?this.fromUrl(a.templateUrl,b):H(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return I(a)?a(b):a},this.fromUrl=function(c,d){return I(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function r(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new P.Param(b,c,d,e),p[b]}function g(a,b,c,d){var e=["",""],f=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return f;switch(c){case!1:e=["(",")"+(d?"?":"")];break;case!0:e=["?(",")?"];break;default:e=["("+c+"|",")?"]}return f+e[0]+b+e[1]}function h(e,f){var g,h,i,j,k;return g=e[2]||e[3],k=b.params[g],i=a.substring(m,e.index),h=f?e[4]:e[4]||("*"==e[1]?".*":null),j=P.type(h||"string")||d(P.type("string"),{pattern:new RegExp(h,b.caseInsensitive?"i":c)}),{id:g,regexp:h,segment:i,type:j,cfg:k}}b=N({params:{}},K(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new P.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash,s.isOptional),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function s(a){N(this,a)}function t(){function a(a){return null!=a?a.toString().replace(/\//g,"%2F"):a}function e(a){return null!=a?a.toString().replace(/%2F/g,"/"):a}function f(){return{strict:p,caseInsensitive:m}}function i(a){return I(a)||L(a)&&I(a[a.length-1])}function j(){for(;w.length;){var a=w.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(u[a.name],l.invoke(a.def))}}function k(a){N(this,a||{})}P=this;var l,m=!1,p=!0,q=!1,u={},v=!0,w=[],x={string:{encode:a,decode:e,is:function(a){return null==a||!H(a)||"string"==typeof a},pattern:/[^/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return H(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return a===!0||a===!1},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^/]*/},any:{encode:b.identity,decode:b.identity,equals:b.equals,pattern:/.*/}};t.$$getDefaultValue=function(a){if(!i(a.value))return a.value;if(!l)throw new Error("Injectable functions cannot be called at configuration time");return l.invoke(a.value)},this.caseInsensitive=function(a){return H(a)&&(m=a),m},this.strictMode=function(a){return H(a)&&(p=a),p},this.defaultSquashPolicy=function(a){if(!H(a))return q;if(a!==!0&&a!==!1&&!J(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return q=a,a},this.compile=function(a,b){return new r(a,N(f(),b))},this.isMatcher=function(a){if(!K(a))return!1;var b=!0;return M(r.prototype,function(c,d){I(c)&&(b=b&&H(a[d])&&I(a[d]))}),b},this.type=function(a,b,c){if(!H(b))return u[a];if(u.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return u[a]=new s(N({name:a},b)),c&&(w.push({name:a,def:c}),v||j()),this},M(x,function(a,b){u[b]=new s(N({name:b},a))}),u=d(u,{}),this.$get=["$injector",function(a){return l=a,v=!1,j(),M(x,function(a,b){u[b]||(u[b]=new s(a))}),this}],this.Param=function(a,b,d,e){function f(a){var b=K(a)?g(a):[],c=-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array");return c&&(a={value:a}),a.$$fn=i(a.value)?a.value:function(){return a.value},a}function j(b,c,d){if(b.type&&c)throw new Error("Param '"+a+"' has two type configurations.");return c?c:b.type?b.type instanceof s?b.type:new s(b.type):"config"===d?u.any:u.string}function k(){var b={array:"search"===e?"auto":!1},c=a.match(/\[\]$/)?{array:!0}:{};return N(b,c,d).array}function m(a,b){var c=a.squash;if(!b||c===!1)return!1;if(!H(c)||null==c)return q;if(c===!0||J(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function p(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=L(a.replace)?a.replace:[],J(e)&&f.push({from:e,to:c}),g=o(f,function(a){return a.from}),n(i,function(a){return-1===h(g,a.from)}).concat(f)}function r(){if(!l)throw new Error("Injectable functions cannot be called at configuration time");var a=l.invoke(d.$$fn);if(null!==a&&a!==c&&!w.type.is(a))throw new Error("Default value ("+a+") for parameter '"+w.id+"' is not an instance of Type ("+w.type.name+")");return a}function t(a){function b(a){return function(b){return b.from===a}}function c(a){var c=o(n(w.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),H(a)?w.type.$normalize(a):r()}function v(){return"{Param:"+a+" "+b+" squash: '"+z+"' optional: "+y+"}"}var w=this;d=f(d),b=j(d,b,e);var x=k();b=x?b.$asArray(x,"search"===e):b,"string"!==b.name||x||"path"!==e||d.value!==c||(d.value="");var y=d.value!==c,z=m(d,y),A=p(d,x,y,z);N(this,{id:a,type:b,location:e,array:x,squash:z,replace:A,isOptional:y,value:t,dynamic:c,config:d,toString:v})},k.prototype={$$new:function(){return d(this,N(new k,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(k.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),M(b,function(b){M(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return M(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return M(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var d,e,f,g,h,i=this.$$keys();for(d=0;d<i.length&&(e=this[i[d]],f=a[i[d]],f!==c&&null!==f||!e.isOptional);d++){if(g=e.type.$normalize(f),!e.type.is(g))return!1;if(h=e.type.encode(g),b.isString(h)&&!e.type.pattern.exec(h))return!1}return!0},$$parent:c},this.ParamSet=k}function u(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return H(d)?d:!0}function h(d,e,f,g){function h(a,b,c){return"/"===p?a:b?p.slice(0,-1)+a:c?p.slice(1)+a:a}function m(a){function b(a){var b=a(f,d);return b?(J(b)&&d.replace().url(b),!0):!1}if(!a||!a.defaultPrevented){o&&d.url()===o;o=c;var e,g=j.length;for(e=0;g>e;e++)if(b(j[e]))return;k&&b(k)}}function n(){return i=i||e.$on("$locationChangeSuccess",m)}var o,p=g.baseHref(),q=d.url();return l||n(),{sync:function(){m()},listen:function(){return n()},update:function(a){return a?void(q=d.url()):void(d.url()!==q&&(d.url(q),d.replace()))},push:function(a,b,e){var f=a.format(b||{});null!==f&&b&&b["#"]&&(f+="#"+b["#"]),d.url(f),o=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled);var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),null!==i&&e&&e["#"]&&(i+="#"+e["#"]),i=h(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!I(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(J(a)){var b=a;a=function(){return b}}else if(!I(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=J(b);if(J(a)&&(a=d.compile(a)),!h&&!I(b)&&!L(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),N(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:J(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(c=b,b=["$match",function(a){return f(c,a)}]),N(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser"]}function v(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function m(a,b){if(!a)return c;var d=J(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");b=m(b);for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=z[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function n(a,b){A[a]||(A[a]=[]),A[a].push(b)}function p(a){for(var b=A[a]||[];b.length;)q(b.shift())}function q(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!J(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(z.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):J(b.parent)?b.parent:K(b.parent)&&J(b.parent.name)?b.parent.name:"";if(e&&!z[e])return n(e,b.self);for(var f in C)I(C[f])&&(b[f]=C[f](b,C.$delegates[f]));return z[c]=b,!b[B]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){y.$current.navigable==b&&j(a,c)||y.transitionTo(b,a,{inherit:!0,location:!1})}]),p(c),b}function r(a){return a.indexOf("*")>-1}function s(a){for(var b=a.split("."),c=y.$current.name.split("."),d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return"**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length?!1:c.join("")===b.join("")}function t(a,b){return J(a)&&!H(b)?C[a]:I(b)&&J(a)?(C[a]&&!C.$delegates[a]&&(C.$delegates[a]=C[a]),C[a]=b,this):this}function u(a,b){return K(a)?b=a:b.name=a,q(b),this}function v(a,e,f,h,l,n,p,q,t){function u(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),D;if(!g.retry)return null;if(f.$retry)return p.update(),E;var h=y.transition=e.when(g.retry);return h.then(function(){return h!==y.transition?A:(b.options.$retry=!0,y.transitionTo(b.to,b.toParams,b.options))},function(){return D}),p.update(),h}function v(a,c,d,g,i,j){function m(){var c=[];return M(a.views,function(d,e){var g=d.resolve&&d.resolve!==a.resolve?d.resolve:{};g.$template=[function(){return f.load(e,{view:d,locals:i.globals,params:n,notify:j.notify})||""}],c.push(l.resolve(g,i.globals,i.resolve,a).then(function(c){if(I(d.controllerProvider)||L(d.controllerProvider)){var f=b.extend({},g,i.globals);c.$$controller=h.invoke(d.controllerProvider,null,f)}else c.$$controller=d.controller;c.$$state=a,c.$$controllerAs=d.controllerAs,i[e]=c}))}),e.all(c).then(function(){return i.globals})}var n=d?c:k(a.params.$$keys(),c),o={$stateParams:n};i.resolve=l.resolve(a.resolve,o,i.resolve,a);var p=[i.resolve.then(function(a){i.globals=a})];return g&&p.push(g),e.all(p).then(m).then(function(a){return i})}var A=e.reject(new Error("transition superseded")),C=e.reject(new Error("transition prevented")),D=e.reject(new Error("transition aborted")),E=e.reject(new Error("transition failed"));return x.locals={resolve:null,globals:{$stateParams:{}}},y={params:{},current:x.self,$current:x,transition:null},y.reload=function(a){return y.transitionTo(y.current,n,{reload:a||!0,inherit:!1,notify:!0})},y.go=function(a,b,c){return y.transitionTo(a,b,N({inherit:!0,relative:y.$current},c))},y.transitionTo=function(b,c,f){c=c||{},f=N({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=y.$current,l=y.params,o=j.path,q=m(b,f.relative),r=c["#"];if(!H(q)){var s={to:b,toParams:c,options:f},t=u(s,j.self,l,f);if(t)return t;if(b=s.to,c=s.toParams,f=s.options,q=m(b,f.relative),!H(q)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(q[B])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(n,c||{},y.$current,q)),!q.params.$$validates(c))return E;c=q.params.$$values(c),b=q;var z=b.path,D=0,F=z[D],G=x.locals,I=[];if(f.reload){if(J(f.reload)||K(f.reload)){if(K(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");var L=f.reload===!0?o[0]:m(f.reload);if(f.reload&&!L)throw new Error("No such reload state '"+(J(f.reload)?f.reload:f.reload.name)+"'");for(;F&&F===o[D]&&F!==L;)G=I[D]=F.locals,D++,F=z[D]}}else for(;F&&F===o[D]&&F.ownParams.$$equals(c,l);)G=I[D]=F.locals,D++,F=z[D];if(w(b,c,j,l,G,f))return r&&(c["#"]=r),y.params=c,O(y.params,n),f.location&&b.navigable&&b.navigable.url&&(p.push(b.navigable.url,c,{$$avoidResync:!0,replace:"replace"===f.location}),p.update(!0)),y.transition=null,e.when(y.current);if(c=k(b.params.$$keys(),c||{}),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,l).defaultPrevented)return a.$broadcast("$stateChangeCancel",b.self,c,j.self,l),p.update(),C;for(var M=e.when(G),P=D;P<z.length;P++,F=z[P])G=I[P]=d(G),M=v(F,c,F===b,M,G,f);var Q=y.transition=M.then(function(){var d,e,g;if(y.transition!==Q)return A;for(d=o.length-1;d>=D;d--)g=o[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<z.length;d++)e=z[d],e.locals=I[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return r&&(c["#"]=r),y.transition!==Q?A:(y.$current=b,y.current=b.self,y.params=c,O(y.params,n),y.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,l),p.update(!0),y.current)},function(d){return y.transition!==Q?A:(y.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,l,d),g.defaultPrevented||p.update(),e.reject(d))});return Q},y.is=function(a,b,d){d=N({relative:y.$current},d||{});var e=m(a,d.relative);return H(e)?y.$current!==e?!1:b?j(e.params.$$values(b),n):!0:c},y.includes=function(a,b,d){if(d=N({relative:y.$current},d||{}),J(a)&&r(a)){if(!s(a))return!1;a=y.$current.name}var e=m(a,d.relative);return H(e)?H(y.$current.includes[e.name])?b?j(e.params.$$values(b),n,g(b)):!0:!1:c},y.href=function(a,b,d){d=N({lossy:!0,inherit:!0,absolute:!1,relative:y.$current},d||{});var e=m(a,d.relative);if(!H(e))return null;d.inherit&&(b=i(n,b||{},y.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys().concat("#"),b||{}),{absolute:d.absolute}):null},y.get=function(a,b){if(0===arguments.length)return o(g(z),function(a){return z[a].self});var c=m(a,b||y.$current);return c&&c.self?c.self:null},y}function w(a,b,c,d,e,f){function g(a,b,c){function d(b){return"search"!=a.params[b].location}var e=a.params.$$keys().filter(d),f=l.apply({},[a.params].concat(e)),g=new P.ParamSet(f);return g.$$equals(b,c)}return!f.reload&&a===c&&(e===c.locals||a.self.reloadOnSearch===!1&&g(c,d,b))?!0:void 0}var x,y,z={},A={},B="abstract",C={parent:function(a){if(H(a.parent)&&a.parent)return m(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?m(b[1]):x},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=N({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(J(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||x).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new P.ParamSet;return M(a.params||{},function(a,c){b[c]||(b[c]=new P.Param(c,null,a,"config"))}),b},params:function(a){return a.parent&&a.parent.params?N(a.parent.params.$$new(),a.ownParams):new P.ParamSet},views:function(a){var b={};return M(H(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?N({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};x=q({name:"",url:"^",views:null,"abstract":!0}),x.navigable=null,this.decorator=t,this.state=u,this.$get=v,v.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function w(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=N(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function x(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}function y(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function g(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(j)return{enter:function(a,b,c){var d=j.enter(a,null,b,c);d&&d.then&&d.then(c)},leave:function(a,b){var c=j.leave(a,b);c&&c.then&&c.then(b)}};if(i){var d=i&&i(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var h=f(),i=h("$animator"),j=h("$animate"),k={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){l&&(l.remove(),l=null),n&&(n.$destroy(),n=null),m&&(r.leave(m,function(){l=null}),l=m,m=null)}function k(g){var k,l=A(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if(g||s!==o){k=c.$new(),o=a.$current.locals[l];var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"),(b.isDefined(q)&&!q||c.$eval(q))&&d(a)}),j()});m=t,n=k,n.$emit("$viewContentLoaded"),n.$eval(p)}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1)}),c.$on("$viewContentLoading",function(){k(!1)}),k(!0)}}};return k}function z(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=A(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e,k.$element=g;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m)}l(e)}}}}}function A(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function B(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function C(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function D(a,c){var d=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,f,g,h){var i=B(g.uiSref,a.current.name),j=null,k=C(f)||a.$current,l="[object SVGAnimatedString]"===Object.prototype.toString.call(f.prop("href"))?"xlink:href":"href",m=null,n="A"===f.prop("tagName").toUpperCase(),o="FORM"===f[0].nodeName,p=o?"action":l,q=!0,r={relative:k,inherit:!0},s=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in s&&(r[a]=s[a])});var t=function(c){if(c&&(j=b.copy(c)),q){m=a.href(i.state,j,r);var d=h[1]||h[0];return d&&d.$$addStateInfo(i.state,j),null===m?(q=!1,!1):void g.$set(p,m)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a,b){a!==j&&t(a)},!0),j=b.copy(e.$eval(i.paramExpr))),t(),o||f.bind("click",function(b){var d=b.which||b.button;if(!(d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target"))){var e=c(function(){a.go(i.state,j,r)});b.preventDefault();var g=n&&!m?1:0;b.preventDefault=function(){g--<=0&&c.cancel(e)}}})}}}function E(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,d,e){function f(){g()?d.addClass(i):d.removeClass(i)}function g(){for(var a=0;a<j.length;a++)if(h(j[a].state,j[a].params))return!0;return!1}function h(b,c){return"undefined"!=typeof e.uiSrefActiveEq?a.is(b.name,c):a.includes(b.name,c)}var i,j=[];i=c(e.uiSrefActiveEq||e.uiSrefActive||"",!1)(b),this.$$addStateInfo=function(b,c){var e=a.get(b,C(d));j.push({state:e||{name:b},params:c}),f()},b.$on("$stateChangeSuccess",f)}]}}function F(a){var b=function(b){return a.is(b)};return b.$stateful=!0,b}function G(a){var b=function(b){return a.includes(b)};return b.$stateful=!0,b}var H=b.isDefined,I=b.isFunction,J=b.isString,K=b.isObject,L=b.isArray,M=b.forEach,N=b.extend,O=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),p.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",p),q.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",q);var P;r.prototype.concat=function(a,b){var c={caseInsensitive:P.caseInsensitive(),strict:P.strictMode(),squash:P.defaultSquashPolicy()};return new r(this.sourcePath+a+this.sourceSearch,N(c,b),this)},r.prototype.toString=function(){return this.source},r.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/g,"-")}var d=b(a).split(/-(?!\\)/),e=o(d,b);return o(e,c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(e=0;j>e;e++){g=h[e];var l=this.params[g],m=d[e+1];for(f=0;f<l.replace;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&l.array===!0&&(m=c(m)),k[g]=l.value(m)}for(;i>e;e++)g=h[e],k[g]=this.params[g].value(b[g]);return k},r.prototype.parameters=function(a){return H(a)?this.params[a]||null:this.$$paramNames},r.prototype.validates=function(a){return this.params.$$validates(a)},r.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],n=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),n),q=p?m.squash:!1,r=m.type.encode(n);if(k){var s=c[f+1];if(q===!1)null!=r&&(j+=L(r)?o(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(q===!0){var t=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(t)[1]}else J(q)&&(j+=q+s)}else{if(null==r||p&&q!==!1)continue;L(r)||(r=[r]),r=o(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0}}return j},s.prototype.is=function(a,b){return!0},s.prototype.encode=function(a,b){return a},s.prototype.decode=function(a,b){return a},s.prototype.equals=function(a,b){return a==b},s.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},s.prototype.pattern=/.*/,s.prototype.toString=function(){return"{Type:"+this.name+"}"},s.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},s.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return L(a)?a:H(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){c=e(c);var d=o(c,a);return b===!0?0===n(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$normalize=h(d(a,"$normalize")),this.name=a.name,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",t),b.module("ui.router.util").run(["$urlMatcherFactory",function(a){}]),u.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",u),v.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",v),w.$inject=[],b.module("ui.router.state").provider("$view",w),b.module("ui.router.state").provider("$uiViewScroll",x),y.$inject=["$state","$injector","$uiViewScroll","$interpolate"],z.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",y),b.module("ui.router.state").directive("uiView",z),D.$inject=["$state","$timeout"],E.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",E).directive("uiSrefActiveEq",E),F.$inject=["$state"],G.$inject=["$state"],b.module("ui.router.state").filter("isState",F).filter("includedByState",G)}(window,window.angular);
/*
 * angular-ui-fugu
 * Version: 0.1.0 - 2016-04-18
 * License: ISC
 */
angular.module("ui.fugu",["ui.fugu.tpls","ui.fugu.alert","ui.fugu.button","ui.fugu.buttonGroup","ui.fugu.timepanel","ui.fugu.calendar","ui.fugu.datepicker","ui.fugu.dropdown","ui.fugu.modal","ui.fugu.notification","ui.fugu.pager","ui.fugu.searchBox","ui.fugu.select","ui.fugu.sortable","ui.fugu.switch","ui.fugu.timepicker","ui.fugu.tooltip","ui.fugu.tree"]),angular.module("ui.fugu.tpls",["alert/templates/alert.html","button/templates/button.html","buttonGroup/templates/buttonGroup.html","timepanel/templates/timepanel.html","calendar/templates/calendar.html","datepicker/templates/datepicker.html","dropdown/templates/dropdown-choices.html","dropdown/templates/dropdown.html","modal/templates/backdrop.html","modal/templates/window.html","notification/templates/notification.html","pager/templates/pager.html","searchBox/templates/searchBox.html","select/templates/choices.html","select/templates/match-multiple.html","select/templates/match.html","select/templates/select-multiple.html","select/templates/select.html","switch/templates/switch.html","timepicker/templates/timepicker.html","tree/templates/tree-node.html","tree/templates/tree.html"]),angular.module("ui.fugu.alert",[]).controller("fuguAlertCtrl",["$scope","$attrs","$timeout","$interpolate",function(e,t,n,a){function i(){e.closeable=!e.close||"true"!=e.close&&"1"!=e.close?!1:!0,e.defaultclose=!1,e.hasIcon=!e.hasIcon||"true"!=e.hasIcon&&"1"!=e.hasIcon?!1:!0}i(),t.closeFunc||(e.closeFunc=function(){e.defaultclose=!0});var l=angular.isDefined(t.type)?a(t.type)(e.$parent):null;if(e.hasIcon)switch(l){case"danger":e.iconClass="remove-sign";break;case"success":e.iconClass="ok-sign";break;case"info":e.iconClass="info-sign";break;default:e.iconClass="exclamation-sign"}var r=angular.isDefined(t.dismissOnTimeout)?a(t.dismissOnTimeout)(e.$parent):null;r&&n(function(){e.closeFunc()},parseInt(r,10))}]).directive("fuguAlert",function(){return{restrict:"E",templateUrl:function(e,t){return t.templateUrl||"templates/alert.html"},replace:!0,transclude:!0,scope:{type:"@",close:"@",closeFunc:"&",closeText:"@",hasIcon:"@"},controller:"fuguAlertCtrl",controllerAs:"alert"}}),angular.module("ui.fugu.button",[]).constant("buttonConfig",{}).directive("fuguButton",[function(){return{restrict:"AE",scope:{disabled:"=?",loading:"=?",onClick:"&?click"},replace:!1,templateUrl:"templates/button.html",controller:"buttonController",link:function(e,t,n){function a(t,n){var a=e.$parent.$eval(t);return angular.isDefined(a)?a:t?t:n}t=angular.element(t.children()[0]);var i=a(n.btnclass,"default"),l=a(n.size,"default"),r=a(n.block,!1),o=a(n.active,!1),c=a(n.type,"button"),s=a(n.text,"button"),u=a(n.icon,"");switch(e.text=e.initText=s,e.type=c,e.icon="glyphicon-"+u,e.iconFlag=""!==u?!0:!1,e.disabled=e.initDisabled=angular.isDefined(e.disabled)?e.disabled:!1,e.loading=angular.isDefined(e.loading)?e.loading:!1,t.addClass("btn-"+i),l){case"large":l="lg";break;case"small":l="sm";break;case"x-small":l="xs";break;default:l="default"}t.addClass("btn-"+l),r&&t.addClass("btn-block"),o&&t.addClass("active"),e.$watch("disabled",function(e){e?t.attr("disabled","disabled"):t.removeAttr("disabled")}),t.bind("click",function(){e.onClick&&(e.onClick(),e.$parent.$apply())}),e.$watch("loading",function(n){var a=t.children("span.glyphicon-refresh-animate"),i=null;n?(e.disabled=n,a.length>0?a.removeClass("hidden"):(e.text="isLoading...",i='<span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span>',t.prepend(i))):(e.disabled=e.initDisabled,e.text=e.initText,a.length>0&&a.addClass("hidden"))})}}}]).controller("buttonController",["$scope",function(e){e.btnClassArr=["default","primary","success","info","warning","danger","link"],e.sizeArr=["large","small","x-small","default"],e.typeArr=["button","reset","submit"]}]),angular.module("ui.fugu.buttonGroup",[]).constant("buttonGroupConfig",{size:"default",type:"radio",showClass:"default",checkboxTrue:!0,checkboxFalse:!1,disabled:!1}).controller("buttonGroupController",["$transclude","$scope","$element","$attrs","buttonGroupConfig",function(e,t,n,a,i){function l(e,n){var a=t.$parent.$eval(e);return angular.isDefined(a)?a:e?e:n}for(var r,o=e(),c=0,s=[],u={};c<o.length;c++)r=o[c].tagName,r&&"button"===r.toLocaleLowerCase()&&(u={},u.value=o[c].innerText,u.btnRadio=l(angular.element(o[c]).attr("btn-radio"),""),u.btnCheckbox=l(angular.element(o[c]).attr("btn-checkbox"),""),s.push(u));switch(t.buttonGroup={},t.buttons=s,t.type=l(a.type,i.type),t.size=l(a.size,i.size),t.showClass=l(a.showClass,i.showClass),t.checkboxTrue=l(a.checkboxTrue,i.checkboxTrue),t.checkboxFalse=l(a.checkboxFalse,i.checkboxFalse),t.disabled=l(a.disabled,i.disabled),t.size){case"large":t.size="btn-lg";break;case"small":t.size="btn-sm";break;case"x-small":t.size="btn-xs";break;default:t.size="btn-default"}t.showClass="btn-"+t.showClass,t.disabled&&(t.disabled="disabled")}]).directive("fuguButtonGroup",[function(){return{restrict:"AE",replace:!0,scope:{ngModel:"@"},require:"^ngModel",templateUrl:"templates/buttonGroup.html",transclude:!0,controller:"buttonGroupController",link:function(e,t,n,a){var i,l,r=e;"radio"===e.type?(a.$render=function(){a.$viewValue&&(e.modelObj=a.$viewValue),angular.forEach(e.buttons,function(e){e.btnRadio||(e.btnRadio=e.value),angular.equals(a.$viewValue,e.btnRadio)?e.active="active":e.active=""})},e.clickFn=function(e,t){t.stopPropagation(),t.preventDefault(),r.disabled||(a.$setViewValue(e.btnRadio),a.$render())}):(a.$render=function(){a.$viewValue&&(e.modelObj=a.$viewValue),angular.forEach(e.buttons,function(t,n){if(l=0,!t.btnCheckbox)for(i in e.modelObj){if(l===n){t.btnCheckbox=i;break}l++}angular.equals(e.modelObj[t.btnCheckbox],e.checkboxTrue)?t.active="active":(t.active="",t.active="")})},e.clickFn=function(t,n){n.stopPropagation(),n.preventDefault(),r.disabled||(t.active?e.modelObj[t.btnCheckbox]=r.checkboxFalse:e.modelObj[t.btnCheckbox]=r.checkboxTrue,a.$setViewValue(e.modelObj),a.$render())})}}}]),angular.module("ui.fugu.timepanel",[]).constant("fuguTimepanelConfig",{hourStep:1,minuteStep:1,secondStep:1,showSeconds:!0,mousewheel:!0,arrowkeys:!0}).filter("smallerValue",function(){return function(e,t,n){return e=parseInt(e,10)-parseInt(n,10),0>e&&(e=t),10>e&&(e="0"+e),e}}).filter("largerValue",function(){return function(e,t,n){return e=parseInt(e,10)+parseInt(n,10),e>t&&(e=0),10>e&&(e="0"+e),e}}).controller("fuguTimepanelCtrl",["$scope","$attrs","$parse","$log","fuguTimepanelConfig","smallerValueFilter","largerValueFilter",function(e,t,n,a,i,l,r){function o(){var t=angular.copy(u.$modelValue);if(t.setHours(e.hour),t.setMinutes(e.minute),t.setSeconds(e.second),e.onChange){var n=e.onChange();angular.isFunction(n)&&n(t)}u.$setViewValue(t),u.$render()}function c(t,n){return function(a){38===a.which?(a.preventDefault(),e.increase(t,n),e.$apply()):40===a.which&&(a.preventDefault(),e.decrease(t,n),e.$apply())}}function s(e){return e>9?e:"0"+e}var u={$setViewValue:angular.noop};this.init=function(n,a){u=n,u.$render=this.render,u.$formatters.unshift(function(e){return e?new Date(e):null});var l=a.eq(0),r=a.eq(1),o=a.eq(2);l.on("focus",function(){l[0].select()}),r.on("focus",function(){r[0].select()}),o.on("focus",function(){o[0].select()});var c=angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):i.mousewheel;c&&this.setupMousewheelEvents(l,r,o);var s=angular.isDefined(t.arrowkeys)?e.$parent.$eval(t.arrowkeys):i.arrowkeys;s&&this.setupArrowkeyEvents(l,r,o)},e.hourStep=angular.isDefined(t.hourStep)?e.$parent.$eval(t.hourStep):i.hourStep,e.minuteStep=angular.isDefined(t.minuteStep)?e.$parent.$eval(t.minuteStep):i.minuteStep,e.secondStep=angular.isDefined(t.secondStep)?e.$parent.$eval(t.secondStep):i.secondStep,e.showSeconds=i.showSeconds,t.showSeconds&&e.$parent.$watch(n(t.showSeconds),function(t){e.showSeconds=!!t}),e.decrease=function(t,n){e[t]=l(e[t],n,e[t+"Step"]),o()},e.increase=function(t,n){e[t]=r(e[t],n,e[t+"Step"]),o()},e.changeInputValue=function(t,n){isNaN(e[t])||(e[t]=parseInt(e[t],10),e[t]<0&&(e[t]=0),e[t]>n&&(e[t]=n),e[t]=s(e[t]),o())},this.render=function(){var t=u.$modelValue;isNaN(t)&&(a.warn('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),t=new Date),e.hour=t?s(t.getHours()):null,e.minute=t?s(t.getMinutes()):null,e.second=t?s(t.getSeconds()):null},this.setupMousewheelEvents=function(t,n,a){var i=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.increase("hour",23):e.decrease("hour",23)),t.preventDefault()}),n.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.increase("minute",59):e.decrease("minute",59)),t.preventDefault()}),a.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.increase("second",59):e.decrease("second",59)),t.preventDefault()})},this.setupArrowkeyEvents=function(e,t,n){e.bind("keydown",c("hour",23)),t.bind("keydown",c("minute",59)),n.bind("keydown",c("second",59))}}]).directive("fuguTimepanel",function(){return{restrict:"AE",templateUrl:"templates/timepanel.html",replace:!0,require:["fuguTimepanel","ngModel"],scope:{onChange:"&"},controller:"fuguTimepanelCtrl",link:function(e,t,n,a){var i=a[0],l=a[1];i.init(l,t.find("input"))}}}),angular.module("ui.fugu.calendar",["ui.fugu.timepanel"]).constant("fuguCalendarConfig",{startingDay:0,showTime:!0,minDate:null,maxDate:null,exceptions:[]}).provider("fuguCanlendar",function(){var e={};this.setFormats=function(t,n){n?e[t]=n:e=t},this.$get=["$locale","$log",function(t,n){return{getFormats:function(){return e=angular.extend(angular.copy(t.DATETIME_FORMATS),e),angular.isArray(e.SHORTMONTH)&&12==e.SHORTMONTH.length&&angular.isArray(e.MONTH)&&12==e.MONTH.length&&angular.isArray(e.SHORTDAY)&&7==e.SHORTDAY.length||(n.warn("invalid date time formats"),e=t.DATETIME_FORMATS),e}}}]}).controller("fuguCalendarCtrl",["$scope","$attrs","$log","fuguCanlendar","fuguCalendarConfig",function(e,t,n,a,i){function l(){var t=e.onChange();t&&angular.isFunction(t)&&t(e.selectDate),w.$setViewValue(e.selectDate),w.$render()}function r(){var t=f(e.currentYear,e.currentMonth);e.allDays=s(t)}function o(e){for(var t=[],n=[],a=-4;8>a;a++)n.length>=3&&(t.push(n),n=[]),n.push(e+a);return t.push(n),t}function c(e){var t=angular.copy(b.SHORTDAY).map(function(e){return e}),n=t.splice(0,e);return t.concat(n)}function s(e){for(var t=[],n=e.getFullYear(),a=e.getMonth(),i=f(n,a,1),l=i.getDay(),r=l>=y.startingDay?l-y.startingDay:7-y.startingDay+l,o=0;r>o;o++)u(t,g(i,r-o));for(var c,s=p(n,a),h=1;s>=h;h++)c=f(n,a,h),u(t,c);r=7-t[t.length-1].length;for(var m=1;r>=m;m++)u(t,d(c,m));return t}function u(e,t){var n=!1;angular.forEach(e,function(e){e&&e.length<7&&(e.push(h(t)),n=!0)}),n||e.push([h(t)])}function d(e,t){t=t||1;var n=e.getTime();return n+=24*t*60*60*1e3,new Date(n)}function g(e,t){t=t||1;var n=e.getTime();return n-=24*t*60*60*1e3,new Date(n)}function p(e,t){var n=$.slice(0);return(e%100===0&&e%400===0||e%100!==0&&e%4===0)&&(n[1]=29),n[t]}function f(e,t,n){var a=new Date;return a.setFullYear(e),a.setMonth(t||0),a.setDate(n||1),a}function h(t){var n=v(t),a=v(e.selectDate),i=v(new Date),l=n.year===i.year&&n.month===i.month&&n.day===i.day,r=n.year===a.year&&n.month===a.month&&n.day===a.day,o=e.minDate&&t.getTime()<e.minDate.getTime()&&!m(t)||e.maxDate&&t.getTime()>e.maxDate.getTime()&&!m(t),c=t.getDay();return{date:t,year:n.year,month:n.month,day:n.day,isWeekend:0===c||6===c,isToday:l,inMonth:n.month===e.currentMonth,isNext:n.month>e.currentMonth,isSelected:r,isDisabled:o,index:n.year+"-"+n.month+"-"+n.day}}function m(e){y.exceptions=[].concat(y.exceptions);var t,n=v(e);return y.exceptions.some(function(e){return t=v(e),t.year===n.year&&t.month===n.month&&t.day===n.day})}function v(e){return{year:e.getFullYear(),month:e.getMonth(),day:e.getDate()}}var b=a.getFormats(),$=[31,28,31,30,31,30,31,31,30,31,30,31],w={$setViewValue:angular.noop};e.FORMATS=b,e.panels={year:!1,month:!1,day:!0,time:!1};var y=this;angular.forEach(["startingDay","exceptions"],function(n){y[n]=angular.isDefined(t[n])?angular.copy(e.$parent.$eval(t[n])):i[n]}),e.showTime=angular.isDefined(t.showTime)?e.$parent.$eval(t.showTime):i.showTime,(y.startingDay>6||y.startingDay<0)&&(y.startingDay=i.startingDay),e.dayNames=c(this.startingDay),e.allDays=[],this.init=function(e){w=e,w.$render=this.render,w.$formatters.unshift(function(e){return e?new Date(e):null})},this.render=function(){var t=w.$modelValue;(isNaN(t)||!t)&&(n.warn('Calendar directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),t=new Date),e.selectDate=angular.copy(t),e.currentYear=e.selectDate.getFullYear(),e.currentMonth=e.selectDate.getMonth(),e.currentDay=e.currentYear+"-"+e.currentMonth+"-"+e.selectDate.getDate(),e.allDays=s(e.selectDate)},e.selectPanel=function(t){angular.forEach(e.panels,function(t,n){e.panels[n]=!1}),e.panels[t]=!0},e.prevMonth=function(){0===e.currentMonth?(e.currentYear-=1,e.currentMonth=11):e.currentMonth-=1,r()},e.nextMonth=function(){11===e.currentMonth?(e.currentYear+=1,e.currentMonth=0):e.currentMonth+=1,r()},e.selectDayHandler=function(t){t.isDisabled||(e.selectDate.setFullYear(t.year),e.selectDate.setMonth(t.month),e.selectDate.setDate(t.day),t.inMonth||(t.isNext?e.nextMonth():e.prevMonth()),e.currentDay=e.currentYear+"-"+e.currentMonth+"-"+e.selectDate.getDate(),l())},e.chooseToday=function(){var t=v(new Date);e.selectDate.setFullYear(t.year),e.selectDate.setMonth(t.month),e.selectDate.setDate(t.day),e.currentYear=t.year,e.currentMonth=t.month,e.currentDay=e.currentYear+"-"+e.currentMonth+"-"+e.selectDate.getDate(),r(),l()};var k;e.selectTimePanelHandler=function(){e.selectPanel("time"),k=angular.copy(e.selectDate)},e.timePanelBack=function(){e.selectDate=angular.copy(k),e.selectPanel("day")},e.timePanelOk=function(){e.selectPanel("day"),l()},e.timePanelSelectNow=function(){var t=new Date,n=angular.copy(e.selectDate);n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds()),e.selectDate=n},e.allMonths=function(){for(var e=[],t=b.MONTH,n=[],a=0,i=t.length;i>a;a++)n.length>=3&&(e.push(n),n=[]),n.push({name:t[a],index:a});return e.push(n),e}(),e.chooseMonthHandler=function(t){e.currentMonth=t,r(),e.selectPanel("day")},e.allYears=[],e.selectYearPanelHandler=function(){e.selectPanel("year");var t=e.currentYear;e.allYears=o(t)},e.prev12Years=function(){var t=e.allYears[0][0]-8;e.allYears=o(t)},e.next12Years=function(){var t=e.allYears[3][2]+5;e.allYears=o(t)},e.chooseYearHandler=function(t){e.currentYear=t,r(),e.selectPanel("month")}}]).directive("fuguCalendar",function(){return{restrict:"AE",templateUrl:"templates/calendar.html",replace:!0,require:["fuguCalendar","ngModel"],scope:{minDate:"=?",maxDate:"=?",onChange:"&"},controller:"fuguCalendarCtrl",link:function(e,t,n,a){var i=a[0],l=a[1];i.init(l)}}}),angular.module("ui.fugu.datepicker",["ui.fugu.calendar"]).constant("fuguDatepickerConfig",{minDate:null,maxDate:null,exceptions:[],format:"yyyy-MM-dd hh:mm:ss a",autoClose:!0}).factory("fuguDatepickerOffset",["$document","$window",function(e,t){return function(n){var a=n[0].getBoundingClientRect();return{width:a.width||n.prop("offsetWidth"),height:a.height||n.prop("offsetHeight"),top:a.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:a.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]).service("fuguDatepickerService",["$document",function(e){function t(e){if(n){var t=n.getCanledarElement(),a=n.getToggleElement();t&&t[0].contains(e.target)||a&&a[0].contains(e.target)||angular.element(e.target).hasClass("fugu-cal-day-inner")||angular.element(e.target).hasClass("fugu-cal-day")||(n.showCalendar=!1,n.$apply())}}var n=null;this.open=function(a){n||e.on("click",t),n&&n!==a&&(n.showCalendar=!1),n=a},this.close=function(a){n===a&&(n=null,e.off("click",t))}}]).controller("fuguDatepickerCtrl",["$scope","$window","$element","$attrs","$log","dateFilter","fuguDatepickerOffset","fuguDatepickerService","fuguDatepickerConfig",function(e,t,n,a,i,l,r,o,c){function s(){var e=r(n),t=e.left+e.width,a=e.top,i=window.innerWidth-t,l=window.innerHeight-a-e.height,o=angular.element(n[0].querySelector(".fugu-calendar"));o.removeClass("fugu-datepicker-cal-left fugu-datepicker-cal-rightfugu-datepicker-cal-topfugu-datepicker-cal-bottom"),t<o[0].clientWidth&&i>o[0].clientWidth?o.addClass("fugu-datepicker-cal-right"):o.addClass("fugu-datepicker-cal-left"),a>o[0].clientHeight&&l<o[0].clientHeight?o.addClass("fugu-datepicker-cal-top"):o.addClass("fugu-datepicker-cal-bottom")}var u={$setViewValue:angular.noop},d=this;this.init=function(e){u=e,u.$render=this.render,u.$formatters.unshift(function(e){return e?new Date(e):null})},e.showCalendar=!1,this.toggle=function(t){e.showCalendar=arguments.length?!!t:!e.showCalendar,e.showCalendar&&e.$$postDigest(function(){s()})},this.showCalendar=function(){return e.showCalendar},angular.forEach(["exceptions","clearBtn"],function(t){e[t]=angular.isDefined(a[t])?angular.copy(e.$parent.$eval(a[t])):c[t]});var g=angular.isDefined(a.format)?e.$parent.$eval(a.format):c.format;this.render=function(){var t=u.$modelValue;isNaN(t)&&(i.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),t=new Date),e.selectDate=t,e.inputValue=l(t,g)},e.toggleCalendarHandler=function(t){n.find("input")[0].blur(),t&&t.preventDefault(),e.isDisabled||d.toggle()},e.getCanledarElement=function(){return angular.element(n[0].querySelector(".fugu-calendar"))},e.getToggleElement=function(){return angular.element(n[0].querySelector(".input-group"))},e.clearDateHandler=function(){e.inputValue=null,e.selectDate=null,u.$setViewValue(null),u.$render()},e.$watch("showCalendar",function(t){t?o.open(e):o.close(e)});var p=angular.isDefined(a.autoClose)?e.$parent.$eval(a.autoClose):c.autoClose;e.changeDateHandler=function(t){e.inputValue=l(t,g),e.selectDate=t,p&&d.toggle(),u.$setViewValue(t),u.$render()},e.$on("$locationChangeSuccess",function(){e.showCalendar=!1})}]).directive("fuguDatepicker",function(){return{restrict:"AE",templateUrl:"templates/datepicker.html",replace:!0,require:["fuguDatepicker","ngModel"],scope:{minDate:"=?",maxDate:"=?",placeholder:"@",isDisabled:"=?ngDisabled"},controller:"fuguDatepickerCtrl",link:function(e,t,n,a){var i=a[0],l=a[1];i.init(l)}}}),angular.module("ui.fugu.dropdown",[]).constant("fuguDropdownConfig",{eachItemWidth:120,openClass:"open",multiColClass:"fugu-dropdown-multi"}).provider("fuguDropdown",function(){var e=3;this.setColsNum=function(t){e=t||3},this.$get=function(){return{getColsNum:function(){return e}}}}).factory("fuguDropdownOffset",["$document","$window",function(e,t){return function(n){var a=n[0].getBoundingClientRect();return{width:a.width||n.prop("offsetWidth"),height:a.height||n.prop("offsetHeight"),top:a.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:a.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]).service("fuguDropdownService",["$document",function(e){function t(e){if(n){var t=n.getToggleElement();e&&t&&t.contains(e.target)||(n.isOpen=!1,n.$apply())}}var n=null;this.open=function(a){n||e.on("click",t),n&&n!==a&&(n.isOpen=!1),n=a},this.close=function(a){n===a&&(n=null,e.off("click",t))}}]).controller("fuguDropdownCtrl",["$scope","$timeout","$attrs","$element","fuguDropdownOffset","fuguDropdownConfig","fuguDropdownService","fuguDropdown",function(e,t,n,a,i,l,r,o){function c(){return e.toggle.hasClass("disabled")||e.toggle.attr("disabled")}function s(){var t=i(a),n=t.top,l=window.innerHeight-n-t.height,r=angular.element(a[0].querySelector(".fugu-dropdown-menu"));if(r.removeClass("dropdown-menu-top dropdown-menu-bottom"),n>r[0].clientHeight&&l<r[0].clientHeight){var o=e.getToggleElement();e.dropdownMenuStyles.top="",e.dropdownMenuStyles.bottom=o?o.clientHeight+"px":""}else e.dropdownMenuStyles.top="100%",e.dropdownMenuStyles.bottom=""}e.colsNum=angular.isDefined(n.colsNum)?angular.copy(e.$parent.$eval(n.colsNum)):o.getColsNum(),e.eachItemWidth=l.eachItemWidth,e.openClass=l.openClass,e.multiColClass=l.multiColClass;var u=this;e.toggleDropdown=function(e){e.preventDefault(),c()||u.toggle()},this.toggle=function(t){var n=e.isOpen=arguments.length?!!t:!e.isOpen;return n},this.isOpen=function(){return e.isOpen},e.dropdownMenuStyles={},e.$watch("isOpen",function(n){n?(r.open(e),t(function(){s()})):r.close(e)}),e.getToggleElement=function(){return a[0].querySelector(".fugu-dropdown-toggle")},e.count=0,this.addChild=function(){e.count++,e.dropdownMenuStyles.width=e.count>e.colsNum?e.colsNum*e.eachItemWidth+"px":"auto",e.count>e.colsNum&&angular.element(a[0].querySelectorAll(".fugu-dropdown-menu > li")).css("width",100/e.colsNum+"%")},this.appendToggle=function(t){var n=angular.element(a[0].querySelector(".fugu-dropdown-toggle"));n.removeAttr("fugu-dropdown-toggle"),n.append(t),e.toggle=t},e.$on("$locationChangeSuccess",function(){e.isOpen=!1})}]).directive("fuguDropdown",function(){return{restrict:"E",templateUrl:"templates/dropdown.html",replace:!0,require:"^fuguDropdown",transclude:!0,scope:{isOpen:"=?"},controller:"fuguDropdownCtrl"}}).directive("fuguDropdownToggle",function(){return{restrict:"A",require:"^fuguDropdown",link:function(e,t,n,a){a.appendToggle(t)}}}).directive("fuguDropdownChoices",function(){return{restrict:"E",templateUrl:"templates/dropdown-choices.html",require:"^fuguDropdown",replace:!0,transclude:!0,scope:!0,link:function(e,t,n,a){a.addChild()}}}),angular.module("ui.fugu.modal",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,n){function a(e){for(var t in e)if(!angular.isUndefined(l.style[t]))return e[t]}var i=function(a,l,r){function o(){n.$apply(function(){a.unbind(s,o),c.resolve(a)})}r=r||{};var c=e.defer(),s=i[r.animation?"animationEndEventName":"transitionEndEventName"];return s&&a.bind(s,o),t(function(){angular.isString(l)?a.addClass(l):angular.isFunction(l)?l(a):angular.isObject(l)&&a.css(l),s||c.resolve(a)}),c.promise.cancel=function(){s&&a.unbind(s,o),c.reject("Transition cancelled")},c.promise},l=document.createElement("trans"),r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},o={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return i.transitionEndEventName=a(r),i.animationEndEventName=a(o),i}]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,a=0;a<e.length;a++)if(t==e[a].key){n=a;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("fuguModalBackdrop",["$timeout",function(e){return{restrict:"EA",replace:!0,templateUrl:"templates/backdrop.html",link:function(t,n,a){t.backdropClass=a.backdropClass||"",t.animate=!1,e(function(){t.animate=!0})}}}]).directive("fuguModalWindow",["$fgModalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"templates/window.html",link:function(n,a,i){a.addClass(i.windowClass||""),n.size=i.size,t(function(){n.animate=!0,a[0].querySelectorAll("[autofocus]").length||a[0].focus()}),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!=n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("fuguModalTransclude",function(){return{link:function(e,t,n,a,i){i(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$fgModalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,n,a,i,l){function r(){for(var e=-1,t=p.keys(),n=0;n<t.length;n++)p.get(t[n]).value.backdrop&&(e=n);return e}function o(e){var t=n.find("body").eq(0),a=p.get(e).value;p.remove(e),s(a.modalDomEl,a.modalScope,300,function(){a.modalScope.$destroy(),t.toggleClass(g,p.length()>0),c()})}function c(){if(u&&-1==r()){var e=d;s(u,d,150,function(){e.$destroy(),e=null}),u=null,d=null}}function s(n,a,i,l){function r(){r.done||(r.done=!0,n.remove(),l&&l())}a.animate=!1;var o=e.transitionEndEventName;if(o){var c=t(r,i);n.bind(o,function(){t.cancel(c),r(),a.$apply()})}else t(r)}var u,d,g="modal-open",p=l.createNew(),f={};return i.$watch(r,function(e){d&&(d.index=e)}),n.bind("keydown",function(e){var t;27===e.which&&(t=p.top(),t&&t.value.keyboard&&(e.preventDefault(),i.$apply(function(){f.dismiss(t.key,"escape key press")})))}),f.open=function(e,t){p.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var l=n.find("body").eq(0),o=r();if(o>=0&&!u){d=i.$new(!0),d.index=o;var c=angular.element("<div fugu-modal-backdrop></div>");c.attr("backdrop-class",t.backdropClass),u=a(c)(d),l.append(u)}var s=angular.element("<div fugu-modal-window></div>");s.attr({"window-class":t.windowClass,size:t.size,index:p.length()-1,animate:"animate"}).html(t.content);var f=a(s)(t.scope);p.top().value.modalDomEl=f,l.append(f),l.addClass(g)},f.close=function(e,t){var n=p.get(e);n&&(n.value.deferred.resolve(t),o(e))},f.dismiss=function(e,t){var n=p.get(e);n&&(n.value.deferred.reject(t),o(e))},f.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},f.getTop=function(){return p.top()},f}]).provider("$fgModal",function(){var e=this;this.options={backdrop:!0,keyboard:!0},this.$get=["$injector","$rootScope","$q","$http","$templateCache","$controller","$fgModalStack",function(t,n,a,i,l,r,o){function c(e){return e.template?a.when(e.template):i.get(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl,{cache:l}).then(function(e){return e.data})}function s(e){var n=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&n.push(a.when(t.invoke(e)))}),n}return{open:function(t){var i=a.defer(),l=a.defer(),u={result:i.promise,opened:l.promise,close:function(e){o.close(u,e)},dismiss:function(e){o.dismiss(u,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var d=a.all([c(t)].concat(s(t.resolve)));return d.then(function(e){var a=(t.scope||n).$new();a.$close=u.close,a.$dismiss=u.dismiss;var l,c={},s=1;t.controller&&(c.$scope=a,c.$fgModalInstance=u,angular.forEach(t.resolve,function(t,n){c[n]=e[s++]}),l=r(t.controller,c),t.controllerAs&&(a[t.controllerAs]=l)),o.open(u,{scope:a,deferred:i,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowClass:t.windowClass,size:t.size})},function(e){i.reject(e)}),d.then(function(){l.resolve(!0)},function(){l.reject(!1)}),u}}}]}),angular.module("ui.fugu.notification",["ui.fugu.alert"]).service("notificationServices",["$sce","$interval","$interpolate","$document","$compile","$rootScope",function(e,t,n,a,i,l){function r(){var e=a.find("body").eq(0),t=l.$new(!0),n=angular.element("<div fugu-notice></div>");e.append(i(n)(t))}var o=this;this.directive={},r(),this.initDirective=function(){return this.directive.notifications=[],this.directive},this.addNotifications=function(e){var a,i,l=!0;if("error"===e.type&&(e.type="danger"),e.text=n(e.text)(e.variables),a=this.directive.notifications,!this.unique||(angular.forEach(a,function(t){i=t.text,e.text===i&&e.title===t.title&&e.type===t.type&&(l=!1)}),l)){if(e.duration&&-1!==e.duration&&t(angular.bind(this,function(){o.deleteNotifications(e)}),e.duration,1),-1!==this.limitNum){var r=a.length-(this.limitNum-1);r>0&&a.splice(0,r)}return a.push(e),e}},this.deleteNotifications=function(e){var t=this.directive.notifications,n=t.indexOf(e);-1!==n&&t.splice(n,1)}}]).controller("notificationController",["$scope","$interval","notification","notificationServices",function(e,t,n,a){a.initDirective(),e.notifications=a.directive.notifications,e.closeFn=function(e){a.deleteNotifications(e)}}]).directive("fuguNotice",[function(){return{restrict:"A",replace:!1,scope:{},templateUrl:"templates/notification.html",controller:"notificationController"}}]).provider("notification",[function(){var e={success:null,error:null,warning:null,info:null},t=!0,n=!1,a=!1,i=-1;this.globalDurationTime=function(t){if("object"==typeof t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);else for(var a in e)e.hasOwnProperty(a)&&(e[a]=t);return this},this.globalDisableCloseBtn=function(e){return n=e,this},this.globalDisableIcon=function(e){return a=e,this},this.globalUnique=function(e){return t=e,this},this.globalLimitNum=function(e){return e>0&&(i=e),this},this.$get=["$rootScope","$interpolate","$sce","$filter","$interval","notificationServices",function(l,r,o,c,s,u){function d(t,i,l){var r,o,c=i||{};return r={text:t,type:l,duration:c.duration||e[l],disableCloseBtn:angular.isDefined(c.disableCloseBtn)?c.disableCloseBtn:n,disableIcon:angular.isDefined(c.disableIcon)?c.disableIcon:a,variables:c.variables||{},destory:function(){u.deleteNotifications(r)},setText:function(e){this.text=e}},o=u.addNotifications(r)}function g(e,t){return d(e,t,"warning")}function p(e,t){return d(e,t,"error")}function f(e,t){return d(e,t,"info")}function h(e,t){return d(e,t,"success")}function m(e,t,n){var a=n?n.toLowerCase():"error";return d(e,t,a)}return u.unique=t,u.limitNum=i,{warning:g,error:p,info:f,success:h,common:m}}]}]),angular.module("ui.fugu.pager",[]).constant("fuguPagerConfig",{itemsPerPage:20,maxSize:5,firstText:"",lastText:"",previousText:"",nextText:""}).controller("fuguPagerCtrl",["$scope",function(e){function t(t){var n=Math.min(t-Math.floor(e.maxSize/2),e.totalPages-e.maxSize);return(0>n||isNaN(n))&&(n=0),n}function n(){e.pages=[];var t,n=Math.min(a+e.maxSize,e.totalPages);for(t=a;n>t;t++)e.pages.push({text:t,pageIndex:t,active:!1})}var a=0,i=!1;this.init=function(t){e.itemsPerPage=e.itemsPerPage||t.itemsPerPage,e.maxSize=e.maxSize||t.maxSize,e.getText=function(n){return e[n+"Text"]||t[n+"Text"]}},e.pages=[],e.currentPage=0,e.totalPages=1,e.$watch("pageNo",function(t){e.selectPage(t-1||0)}),e.$watch("totalItems",function(t){-1!==e.currentPage&&(e.totalPages=Math.ceil(t/e.itemsPerPage),(e.totalPages<=0||isNaN(e.totalPages))&&(e.totalPages=1),i&&a>e.totalPages&&(a=0,(e.currentPage<a||e.currentPage>=a+e.pages.length)&&(e.currentPage=0)),n(),i=!0,e.pages[e.currentPage-a]&&(e.pages[e.currentPage-a].active=!0),e.selectPage(e.currentPage))}),e.isFirst=function(){return e.currentPage<=0},e.isLast=function(){return e.currentPage>=e.totalPages-1},e.selectPage=function(i){if(!(i>=e.totalPages||0>i)){e.pages[e.currentPage-a]&&(e.pages[e.currentPage-a].active=!1);var l=t(i),r=e.currentPage;l!=a&&(a=l,n()),e.currentPage=i,e.pageNo=i+1,e.pages[e.currentPage-a]&&(e.pages[e.currentPage-a].active=!0,e.$emit("pager:pageIndexChanged",e.pages[e.currentPage-a]));var o;angular.isDefined(e.pageChanged)&&r!==e.currentPage&&(o=e.pageChanged(),o&&"function"==typeof o&&o(e.currentPage+1))}},e.first=function(){e.isFirst()||this.selectPage(0)},e.last=function(){e.isLast()||this.selectPage(e.totalPages-1)},e.previous=function(){e.isFirst()||this.selectPage(e.currentPage-1)},e.next=function(){e.isLast()||this.selectPage(e.currentPage+1)}}]).directive("fuguPager",["fuguPagerConfig",function(e){return{restrict:"E",templateUrl:"templates/pager.html",replace:!0,require:"fuguPager",scope:{itemsPerPage:"=?",totalItems:"=",pageNo:"=",maxSize:"=?",firstText:"@?",lastText:"@?",previousText:"@?",nextText:"@?",pageChanged:"&?"},controller:"fuguPagerCtrl",link:function(t,n,a,i){i.init(e)}}}]),angular.module("ui.fugu.searchBox",[]).constant("fuguSearchBoxConfig",{btnText:"",showBtn:!0}).controller("fuguSearchBoxCtrl",["$scope","$attrs","fuguSearchBoxConfig",function(e,t,n){
var a={$setViewValue:angular.noop};e.searchBox={},this.init=function(i){i&&(a=i),a.$render=this.render,e.showBtn=angular.isDefined(t.showBtn)?e.$parent.$eval(t.showBtn):n.showBtn};var i;e.getText=function(){return i?i:i=angular.isDefined(t.btnText)?t.btnText:n.btnText},e.$watch("searchBox.query",function(e){a.$setViewValue(e),a.$render()}),e.keyUpToSearch=function(t){t&&13===t.keyCode&&(t.preventDefault(),t.stopPropagation(),e.doSearch())},e.doSearch=function(){angular.isDefined(e.search)&&"function"==typeof e.search&&e.search()},this.render=function(){a.$viewValue&&(e.searchBox.query=a.$viewValue)}}]).directive("fuguSearchBox",function(){return{restrict:"E",templateUrl:"templates/searchBox.html",replace:!0,require:["fuguSearchBox","?ngModel"],scope:{btnText:"@?",showBtn:"=?",placeholder:"@?",search:"&?"},controller:"fuguSearchBoxCtrl",link:function(e,t,n,a){var i=a[0],l=a[1];i.init(l)}}}),angular.module("ui.fugu.select",[]).constant("fuguSelectConfig",{KEY:{TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(e){var t=e.which;switch(t){case this.COMMAND:case this.SHIFT:case this.CTRL:case this.ALT:return!0}return e.metaKey},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e},isVerticalMovement:function(e){return-1!==[this.UP,this.DOWN].indexOf(e)},isHorizontalMovement:function(e){return-1!==[this.LEFT,this.RIGHT,this.BACKSPACE,this.DELETE].indexOf(e)}},searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,appendToBody:!1}).service("fuguSelectMinErr",function(){var e=angular.$$minErr("ui.fugu.select");return function(){var t=e.apply(this,arguments),n="\nhttp://errors.angularjs.org/.*",a=t.message.replace(new RegExp(n),"");return new Error(a)}}).directive("fuguTranscludeAppend",function(){return{link:function(e,t,n,a,i){i(e,function(e){t.append(e)})}}}).filter("highlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n&&t?t.replace(new RegExp(e(n),"gi"),'<span class="fugu-select-highlight">$&</span>'):t}}).factory("fuguSelectOffset",["$document","$window",function(e,t){return function(n){var a=n[0].getBoundingClientRect();return{width:a.width||n.prop("offsetWidth"),height:a.height||n.prop("offsetHeight"),top:a.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:a.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]).controller("fuguSelectCtrl",["$scope","$element","$timeout","$filter","fuguSelectRepeatParser","fuguSelectMinErr","fuguSelectConfig",function(e,t,n,a,i,l,r){function o(){(g.resetSearchInput||!g.resetSearchInput&&r.resetSearchInput)&&(g.search=p,g.selected&&g.items.length&&!g.multiple&&(g.activeIndex=g.items.indexOf(g.selected)))}function c(e,t){var n,a,i=[];for(n=0;n<t.length;n++)for(a=0;a<e.length;a++)e[a].name===[t[n]]&&i.push(e[a]);return i}function s(e){var t=!0;switch(e){case d.DOWN:!g.open&&g.multiple?g.activate(!1,!0):g.activeIndex<g.items.length-1&&g.activeIndex++;break;case d.UP:!g.open&&g.multiple?g.activate(!1,!0):(g.activeIndex>0||0===g.search.length&&g.tagging.isActivated&&g.activeIndex>-1)&&g.activeIndex--;break;case d.TAB:(!g.multiple||g.open)&&g.select(g.items[g.activeIndex],!0);break;case d.ENTER:g.open&&(g.tagging.isActivated||g.activeIndex>=0)?g.select(g.items[g.activeIndex]):g.activate(!1,!0);break;case d.ESC:g.close();break;default:t=!1}return t}function u(){var e=angular.element(t[0].querySelectorAll(".fugu-select-choices-content")),n=angular.element(e[0].querySelectorAll(".fugu-select-choices-row"));if(n.length<1)throw l("choices","Expected multiple .fugu-select-choices-row but got '{0}'.",n.length);if(!(g.activeIndex<0)){var a=n[g.activeIndex],i=a.offsetTop+a.clientHeight-e[0].scrollTop,r=e[0].offsetHeight;i>r?e[0].scrollTop+=i-r:i<a.clientHeight&&(g.isGrouped&&0===g.activeIndex?e[0].scrollTop=0:e[0].scrollTop-=a.clientHeight-i)}}var d=r.KEY,g=this,p="";if(g.placeholder=r.placeholder,g.searchEnabled=r.searchEnabled,g.sortable=r.sortable,g.refreshDelay=r.refreshDelay,g.removeSelected=!1,g.closeOnSelect=!0,g.search=p,g.activeIndex=0,g.items=[],g.open=!1,g.focus=!1,g.disabled=!1,g.selected=null,g.focusser=null,g.resetSearchInput=!0,g.multiple=null,g.disableChoiceExpression=null,g.tagging={isActivated:!1,fct:null},g.taggingTokens={isActivated:!1,tokens:null},g.lockChoiceExpression=null,g.clickTriggeredSelect=!1,g.$filter=a,g.searchInput=angular.element(t[0].querySelectorAll("input.fugu-select-search")),1!==g.searchInput.length)throw l("searchInput","Expected 1 input.fugu-select-search but got '{0}'.",g.searchInput.length);g.isEmpty=function(){return angular.isUndefined(g.selected)||null===g.selected||""===g.selected},g.activate=function(t,a){g.disabled||g.open||(a||o(),e.$broadcast("fugus:activate"),g.open=!0,g.activeIndex=g.activeIndex>=g.items.length?0:g.activeIndex,-1===g.activeIndex&&g.taggingLabel!==!1&&(g.activeIndex=0),n(function(){g.search=t||g.search,g.searchInput[0].focus()}))},g.findGroupByName=function(e){return g.groups&&g.groups.filter(function(t){return t.name===e})[0]},g.parseRepeatAttr=function(t,n,a){function r(t){var i=e.$eval(n);if(g.groups=[],angular.forEach(t,function(e){var t=angular.isFunction(i)?i(e):e[i],n=g.findGroupByName(t);n?n.items.push(e):g.groups.push({name:t,items:[e]})}),a){var l=e.$eval(a);angular.isFunction(l)?g.groups=l(g.groups):angular.isArray(l)&&(g.groups=c(g.groups,l))}g.items=[],g.groups.forEach(function(e){g.items=g.items.concat(e.items)})}function o(e){g.items=e}g.setItemsFn=n?r:o,g.parserResult=i.parse(t),g.isGrouped=!!n,g.itemProperty=g.parserResult.itemName,g.refreshItems=function(t){t=t||g.parserResult.source(e);var n=g.selected;if(angular.isArray(n)&&!n.length||!g.removeSelected)g.setItemsFn(t);else if(t){var a=t.filter(function(e){return n.indexOf(e)<0});g.setItemsFn(a)}},e.$watchCollection(g.parserResult.source,function(e){if(e){if(!angular.isArray(e))throw l("items","Expected an array but got '{0}'.",e);g.refreshItems(e),g.ngModel.$modelValue=null}else g.items=[]})};var f;g.refresh=function(t){angular.isUndefined(t)||(f&&n.cancel(f),f=n(function(){e.$eval(t)},g.refreshDelay))},g.setActiveItem=function(e){g.activeIndex=g.items.indexOf(e)},g.isActive=function(e){if(!g.open)return!1;var t=g.items.indexOf(e[g.itemProperty]),n=t===g.activeIndex;return!n||0>t&&g.taggingLabel!==!1||0>t&&g.taggingLabel===!1?!1:(n&&!angular.isUndefined(g.onHighlightCallback)&&e.$eval(g.onHighlightCallback),n)},g.isDisabled=function(e){if(g.open){var t,n=g.items.indexOf(e[g.itemProperty]),a=!1;return n>=0&&!angular.isUndefined(g.disableChoiceExpression)&&(t=g.items[n],a=!!e.$eval(g.disableChoiceExpression),t._fuguSelectChoiceDisabled=a),a}},g.select=function(t,a,i){if(angular.isUndefined(t)||!t._fuguSelectChoiceDisabled){if(!g.items&&!g.search)return;if(!t||!t._fuguSelectChoiceDisabled){if(g.tagging.isActivated){if(g.taggingLabel===!1)if(g.activeIndex<0){if(t=angular.isUndefined(g.tagging.fct)?g.search:g.tagging.fct(g.search),!t||angular.equals(g.items[0],t))return}else t=g.items[g.activeIndex];else if(0===g.activeIndex){if(angular.isUndefined(t))return;if(angular.isUndefined(g.tagging.fct)||"string"!=typeof t)"string"==typeof t&&(t=t.replace(g.taggingLabel,"").trim());else if(t=g.tagging.fct(g.search),!t)return}if(g.selected&&angular.isArray(g.selected)&&g.selected.filter(function(e){return angular.equals(e,t)}).length>0)return void g.close(a)}e.$broadcast("fugus:select",t);var l={};l[g.parserResult.itemName]=t,n(function(){g.onSelectCallback(e,{$item:t,$model:g.parserResult.modelMapper(e,l)})}),g.closeOnSelect&&g.close(a),i&&"click"===i.type&&(g.clickTriggeredSelect=!0)}}},g.close=function(t){g.open&&(g.ngModel&&g.ngModel.$setTouched&&g.ngModel.$setTouched(),o(),g.open=!1,e.$broadcast("fugus:close",t))},g.setFocus=function(){g.focus||g.focusInput[0].focus()},g.clear=function(e){g.select(),e.stopPropagation(),n(function(){g.focusser[0].focus()},0,!1)},g.toggle=function(e){g.open?(g.close(),e.preventDefault(),e.stopPropagation()):g.activate()},g.isLocked=function(e,t){var n,a=g.selected[t];return a&&!angular.isUndefined(g.lockChoiceExpression)&&(n=!!e.$eval(g.lockChoiceExpression),a._fuguSelectChoiceLocked=n),n};var h=null;g.sizeSearchInput=function(){var t=g.searchInput[0],a=g.searchInput.parent().parent()[0],i=function(){return a.clientWidth*!!t.offsetParent},l=function(e){if(0===e)return!1;var n=e-t.offsetLeft-10;return 50>n&&(n=e),g.searchInput.css("width",n+"px"),!0};g.searchInput.css("width","10px"),n(function(){null!==h||l(i())||(h=e.$watch(i,function(e){l(e)&&(h(),h=null)}))})},g.searchInput.on("keydown",function(t){var a=t.which;e.$apply(function(){var e=!1;if((g.items.length>0||g.tagging.isActivated)&&(s(a),g.taggingTokens.isActivated)){for(var i=0;i<g.taggingTokens.tokens.length;i++)g.taggingTokens.tokens[i]===d.MAP[t.keyCode]&&g.search.length>0&&(e=!0);e&&n(function(){g.searchInput.triggerHandler("tagged");var e=g.search.replace(d.MAP[t.keyCode],"").trim();g.tagging.fct&&(e=g.tagging.fct(e)),e&&g.select(e,!0)})}}),d.isVerticalMovement(a)&&g.items.length>0&&u(),(a===d.ENTER||a===d.ESC)&&(t.preventDefault(),t.stopPropagation())}),g.searchInput.on("paste",function(e){var t=e.originalEvent.clipboardData.getData("text/plain");if(t&&t.length>0&&g.taggingTokens.isActivated&&g.tagging.fct){var n=t.split(g.taggingTokens.tokens[0]);n&&n.length>0&&(angular.forEach(n,function(e){var t=g.tagging.fct(e);t&&g.select(t,!0)}),e.preventDefault(),e.stopPropagation())}}),g.searchInput.on("tagged",function(){n(function(){o()})}),e.$on("$destroy",function(){g.searchInput.off("keyup keydown tagged blur paste")})}]).directive("fuguSelect",["$document","fuguSelectConfig","fuguSelectMinErr","fuguSelectOffset","$compile","$parse","$timeout",function(e,t,n,a,i,l,r){return{restrict:"EA",templateUrl:function(e,t){return angular.isDefined(t.multiple)?"templates/select-multiple.html":"templates/select.html"},replace:!0,transclude:!0,require:["fuguSelect","^ngModel"],scope:!0,controller:"fuguSelectCtrl",controllerAs:"$select",compile:function(i,o){return angular.isDefined(o.multiple)?i.append("<fugu-select-multiple/>").removeAttr("multiple"):i.append("<fugu-select-single/>"),function(i,o,c,s,u){function d(e){if(f.open){var t=!1;if(t=window.jQuery?window.jQuery.contains(o[0],e.target):o[0].contains(e.target),!t&&!f.clickTriggeredSelect){var n=["input","button","textarea"],a=angular.element(e.target).scope(),l=a&&a.$select&&a.$select!==f;l||(l=-1!==n.indexOf(e.target.tagName.toLowerCase())),f.close(l),i.$digest()}f.clickTriggeredSelect=!1}}function g(){var t=a(o);v=angular.element('<div class="fugu-select-placeholder"></div>'),v[0].style.width=t.width+"px",v[0].style.height=t.height+"px",o.after(v),b=o[0].style.width,e.find("body").append(o),o[0].style.position="absolute",o[0].style.left=t.left+"px",o[0].style.top=t.top+"px",o[0].style.width=t.width+"px"}function p(){null!==v&&(v.replaceWith(o),v=null,o[0].style.position="",o[0].style.left="",o[0].style.top="",o[0].style.width=b)}var f=s[0],h=s[1];f.baseTitle=c.title||"Select box",f.focusserTitle=f.baseTitle+" focus",f.closeOnSelect=function(){return angular.isDefined(c.closeOnSelect)?l(c.closeOnSelect)():t.closeOnSelect}(),f.onSelectCallback=l(c.onSelect),f.onRemoveCallback=l(c.onRemove),f.ngModel=h,f.choiceGrouped=function(e){return f.isGrouped&&e&&e.name},c.tabindex&&c.$observe("tabindex",function(e){f.focusInput.attr("tabindex",e),o.removeAttr("tabindex")}),i.$watch("searchEnabled",function(){var e=i.$eval(c.searchEnabled);f.searchEnabled=angular.isUndefined(e)?t.searchEnabled:e}),i.$watch("sortable",function(){var e=i.$eval(c.sortable);f.sortable=angular.isUndefined(e)?t.sortable:e}),c.$observe("disabled",function(){f.disabled=angular.isUndefined(c.disabled)?!1:c.disabled}),c.$observe("resetSearchInput",function(){var e=i.$eval(c.resetSearchInput);f.resetSearchInput=angular.isUndefined(e)?!0:e}),c.$observe("tagging",function(){if(angular.isUndefined(c.tagging))f.tagging={isActivated:!1,fct:null};else{var e=i.$eval(c.tagging);f.tagging={isActivated:!0,fct:e!==!0?e:null}}}),c.$observe("taggingLabel",function(){c.tagging&&("false"===c.taggingLabel?f.taggingLabel=!1:f.taggingLabel=c.taggingLabel?c.taggingLabel:"(new)")}),c.$observe("taggingTokens",function(){if(c.tagging){var e=c.taggingTokens?c.taggingTokens.split("|"):[",","ENTER"];f.taggingTokens={isActivated:!0,tokens:e}}}),angular.isDefined(c.autofocus)&&r(function(){f.setFocus()}),angular.isDefined(c.focusOn)&&i.$on(c.focusOn,function(){r(function(){f.setFocus()})}),e.on("click",d),i.$on("$destroy",function(){e.off("click",d)}),u(i,function(e){var t=angular.element("<div>").append(e),a=angular.element(t[0].querySelectorAll(".fugu-select-match"));if(a.removeAttr("fugu-select-match"),a.removeAttr("data-fugu-select-match"),1!==a.length)throw n("transcluded","Expected 1 .fugu-select-match but got '{0}'.",a.length);angular.element(o[0].querySelectorAll(".fugu-select-match")).replaceWith(a);var i=angular.element(t[0].querySelectorAll(".fugu-select-choices"));if(i.removeAttr("fugu-select-choices"),i.removeAttr("data-fugu-select-choices"),1!==i.length)throw n("transcluded","Expected 1 .fugu-select-choices but got '{0}'.",i.length);angular.element(o[0].querySelectorAll(".fugu-select-choices")).replaceWith(i)});var m=i.$eval(c.appendToBody);(m?m:t.appendToBody)&&(i.$watch("$select.open",function(e){e?g():p()}),i.$on("$destroy",function(){p()}));var v=null,b="",$=null,w="direction-up";i.$watch("$select.open",function(t){if(t){if($=angular.element(o[0].querySelectorAll(".fugu-select-dropdown")),null===$)return;$[0].style.opacity=0,r(function(){var t=a(o),n=a($);t.top+t.height+n.height>e[0].documentElement.scrollTop+e[0].documentElement.clientHeight&&($[0].style.position="absolute",$[0].style.top=-1*n.height+"px",o.addClass(w)),$[0].style.opacity=1})}else{if(null===$)return;$[0].style.position="",$[0].style.top="",o.removeClass(w)}})}}}}]).directive("fuguSelectChoices",["fuguSelectConfig","fuguSelectRepeatParser","fuguSelectMinErr","$compile",function(e,t,n,a){return{restrict:"EA",require:"^fuguSelect",replace:!0,transclude:!0,templateUrl:"templates/choices.html",compile:function(i,l){if(!l.repeat)throw n("repeat","Expected 'repeat' expression.");return function(i,l,r,o,c){var s=r.groupBy,u=r.groupFilter;if(o.parseRepeatAttr(r.repeat,s,u),o.disableChoiceExpression=r.disableChoice,o.onHighlightCallback=r.onHighlight,s){var d=angular.element(l[0].querySelectorAll(".fugu-select-choices-group"));if(1!==d.length)throw n("rows","Expected 1 .fugu-select-choices-group but got '{0}'.",d.length);d.attr("ng-repeat",t.getGroupNgRepeatExpression())}var g=angular.element(l[0].querySelectorAll(".fugu-select-choices-row"));if(1!==g.length)throw n("rows","Expected 1 .fugu-select-choices-row but got '{0}'.",g.length);g.attr("ng-repeat",t.getNgRepeatExpression(o.parserResult.itemName,"$select.items",o.parserResult.trackByExp,s)).attr("ng-if","$select.open").attr("ng-mouseenter","$select.setActiveItem("+o.parserResult.itemName+")").attr("ng-click","$select.select("+o.parserResult.itemName+",false,$event)");var p=angular.element(l[0].querySelectorAll(".fugu-select-choices-row-inner"));if(1!==p.length)throw n("rows","Expected 1 .fugu-select-choices-row-inner but got '{0}'.",p.length);p.attr("fugu-transclude-append",""),a(l,c)(i),i.$watch("$select.search",function(e){e&&!o.open&&o.multiple&&o.activate(!1,!0),o.activeIndex=o.tagging.isActivated?-1:0,o.refresh(r.refresh)}),r.$observe("refreshDelay",function(){var t=i.$eval(r.refreshDelay);o.refreshDelay=t?t:e.refreshDelay})}}}}]).directive("fuguSelectMatch",["fuguSelectConfig",function(e){return{restrict:"EA",require:"^fuguSelect",replace:!0,transclude:!0,templateUrl:function(e){var t=e.parent().attr("multiple");return t?"templates/match-multiple.html":"templates/match.html"},link:function(t,n,a,i){function l(e){i.allowClear=angular.isDefined(e)?""===e?!0:"true"===e.toLowerCase():!1}i.lockChoiceExpression=a.lockChoice,a.$observe("placeholder",function(t){i.placeholder=t?t:e.placeholder}),a.$observe("allowClear",l),l(a.allowClear),i.multiple&&i.sizeSearchInput()}}}]).directive("fuguSelectMultiple",["fuguSelectConfig","fuguSelectMinErr","$timeout",function(e,t,n){return{restrict:"EA",require:["^fuguSelect","^ngModel"],controller:["$scope","$timeout",function(e,t){var n,a=this,i=e.$select;e.$evalAsync(function(){n=e.ngModel}),a.activeMatchIndex=-1,a.updateModel=function(){n.$setViewValue(Date.now()),a.refreshComponent()},a.refreshComponent=function(){i.refreshItems(),i.sizeSearchInput()},a.removeChoice=function(n){var l=i.selected[n];if(!l._fuguSelectChoiceLocked){var r={};r[i.parserResult.itemName]=l,i.selected.splice(n,1),a.activeMatchIndex=-1,i.sizeSearchInput(),t(function(){i.onRemoveCallback(e,{$item:l,$model:i.parserResult.modelMapper(e,r)})}),a.updateModel()}},a.getPlaceholder=function(){return i.selected.length?void 0:i.placeholder}}],controllerAs:"$selectMultiple",link:function(a,i,l,r){function o(e){return angular.isNumber(e.selectionStart)?e.selectionStart:e.value.length}function c(e){function t(){switch(e){case f.LEFT:return-1!==p.activeMatchIndex?s:l;case f.RIGHT:return-1===p.activeMatchIndex||r===l?(d.activate(),!1):c;case f.BACKSPACE:return-1!==p.activeMatchIndex?(p.removeChoice(r),s):l;case f.DELETE:return-1!==p.activeMatchIndex?(p.removeChoice(p.activeMatchIndex),r):!1}}var n=o(d.searchInput[0]),a=d.selected.length,i=0,l=a-1,r=p.activeMatchIndex,c=p.activeMatchIndex+1,s=p.activeMatchIndex-1,u=r;return n>0||d.search.length&&e==f.RIGHT?!1:(d.close(),u=t(),d.selected.length&&u!==!1?p.activeMatchIndex=Math.min(l,Math.max(i,u)):p.activeMatchIndex=-1,!0)}function s(e){return e&&d.search?e.filter(function(e){return d.search.toUpperCase()&&e?e.toUpperCase()===d.search.toUpperCase():!1}).length>0:!1}function u(e,t){var n=-1;if(angular.isArray(e))for(var a=angular.copy(e),i=0;i<a.length;i++)if(d.tagging.fct||a[i]+" "+d.taggingLabel!==t){var l=a[i];l.isTag=!0,angular.equals(l,t)&&(n=i)}else n=i;return n}var d=r[0],g=a.ngModel=r[1],p=a.$selectMultiple,f=e.KEY;d.multiple=!0,d.removeSelected=!0,d.focusInput=d.searchInput,g.$parsers.unshift(function(){for(var e,t={},n=[],i=d.selected.length-1;i>=0;i--)t={},t[d.parserResult.itemName]=d.selected[i],e=d.parserResult.modelMapper(a,t),n.unshift(e);return n}),g.$formatters.unshift(function(e){var t,n=d.parserResult.source(a,{$select:{search:""}}),i={};if(!n)return e;var l=[],r=function(e,n){if(e&&e.length){for(var r=e.length-1;r>=0;r--){if(i[d.parserResult.itemName]=e[r],t=d.parserResult.modelMapper(a,i),d.parserResult.trackByExp){var o=/\.(.+)/.exec(d.parserResult.trackByExp);if(o.length>0&&t[o[1]]==n[o[1]])return l.unshift(e[r]),!0}if(angular.equals(t,n))return l.unshift(e[r]),!0}return!1}};if(!e)return l;for(var o=e.length-1;o>=0;o--)r(d.selected,e[o])||r(n,e[o])||l.unshift(e[o]);return l}),a.$watchCollection(function(){return g.$modelValue},function(e,t){t!=e&&(g.$modelValue=null,p.refreshComponent())}),g.$render=function(){if(!angular.isArray(g.$viewValue)){if(!angular.isUndefined(g.$viewValue)&&null!==g.$viewValue)throw t("multiarr","Expected model value to be array but got '{0}'",g.$viewValue);d.selected=[]}d.selected=g.$viewValue,a.$evalAsync()},a.$on("fugus:select",function(e,t){d.selected.push(t),p.updateModel()}),a.$on("fugus:activate",function(){p.activeMatchIndex=-1}),a.$watch("$select.disabled",function(e,t){t&&!e&&d.sizeSearchInput()}),d.searchInput.on("keydown",function(e){var t=e.which;a.$apply(function(){var n=!1;f.isHorizontalMovement(t)&&(n=c(t)),n&&t!=f.TAB&&(e.preventDefault(),e.stopPropagation())})}),d.searchInput.on("keyup",function(e){if(f.isVerticalMovement(e.which)||a.$evalAsync(function(){d.activeIndex=d.taggingLabel===!1?-1:0}),d.tagging.isActivated&&d.search.length>0){if(e.which===f.TAB||f.isControl(e)||f.isFunctionKey(e)||e.which===f.ESC||f.isVerticalMovement(e.which))return;if(d.activeIndex=d.taggingLabel===!1?-1:0,d.taggingLabel===!1)return;var t,n,i,l,r=angular.copy(d.items),o=angular.copy(d.items),c=!1,g=-1;if(d.tagging.fct){if(i=d.$filter("filter")(r,{isTag:!0}),i.length>0&&(l=i[0]),r.length>0&&l&&(c=!0,r=r.slice(1,r.length),o=o.slice(1,o.length)),t=d.tagging.fct(d.search),t.isTag=!0,o.filter(function(e){return angular.equals(e,d.tagging.fct(d.search))}).length>0)return;t.isTag=!0}else{if(i=d.$filter("filter")(r,function(e){return e.match(d.taggingLabel)}),i.length>0&&(l=i[0]),n=r[0],n&&r.length>0&&l&&(c=!0,r=r.slice(1,r.length),o=o.slice(1,o.length)),t=d.search+" "+d.taggingLabel,u(d.selected,d.search)>-1)return;if(s(o.concat(d.selected)))return void(c&&(r=o,a.$evalAsync(function(){d.activeIndex=0,d.items=r})));if(s(o))return void(c&&(d.items=o.slice(1,o.length)))}c&&(g=u(d.selected,t)),g>-1?r=r.slice(g+1,r.length-1):(r=[],r.push(t),r=r.concat(o)),a.$evalAsync(function(){d.activeIndex=0,d.items=r})}}),d.searchInput.on("blur",function(){n(function(){p.activeMatchIndex=-1})})}}}]).directive("fuguSelectSingle",["fuguSelectConfig","$timeout","$compile",function(e,t,n){return{restrict:"EA",require:["^fuguSelect","^ngModel"],link:function(a,i,l,r){var o=e.KEY,c=r[0],s=r[1];s.$parsers.unshift(function(e){var t,n={};return n[c.parserResult.itemName]=e,t=c.parserResult.modelMapper(a,n)}),s.$formatters.unshift(function(e){var t,n=c.parserResult.source(a,{$select:{search:""}}),i={};if(n){var l=function(n){return i[c.parserResult.itemName]=n,t=c.parserResult.modelMapper(a,i),t===e};if(c.selected&&l(c.selected))return c.selected;for(var r=n.length-1;r>=0;r--)if(l(n[r]))return n[r]}return e}),a.$watch("$select.selected",function(e){s.$viewValue!==e&&s.$setViewValue(e)}),s.$render=function(){c.selected=s.$viewValue},a.$on("fugus:select",function(e,t){c.selected=t}),a.$on("fugus:close",function(e,n){t(function(){c.focusser.prop("disabled",!1),n||c.focusser[0].focus()},0,!1)});var u=angular.element("<input ng-disabled='$select.disabled' class='fugu-select-focusser fugu-select-offscreen' type='text' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");a.$on("fugus:activate",function(){u.prop("disabled",!0)}),n(u)(a),c.focusser=u,c.focusInput=u,i.parent().append(u),u.bind("focus",function(){a.$evalAsync(function(){c.focus=!0})}),u.bind("blur",function(){a.$evalAsync(function(){c.focus=!1})}),u.bind("keydown",function(e){return e.which===o.BACKSPACE?(e.preventDefault(),e.stopPropagation(),c.select(),void a.$apply()):void(e.which===o.TAB||o.isControl(e)||o.isFunctionKey(e)||e.which===o.ESC||((e.which===o.DOWN||e.which===o.UP||e.which===o.ENTER||e.which===o.SPACE)&&(e.preventDefault(),e.stopPropagation(),c.activate()),a.$digest()))}),u.bind("keyup input",function(e){e.which===o.TAB||o.isControl(e)||o.isFunctionKey(e)||e.which===o.ESC||e.which===o.ENTER||e.which===o.BACKSPACE||(c.activate(u.val()),u.val(""),a.$digest())})}}}]).directive("fuguSelectSort",["$timeout","fuguSelectConfig","fuguSelectMinErr",function(e,t,n){return{require:"^fuguSelect",link:function(t,a,i,l){function r(e){var n=t.$eval(i.fuguSelectSort),l=n[e],r=null;r=a.hasClass(d)?e<t.$index?t.$index-1:t.$index:e<t.$index?t.$index:t.$index+1,f.apply(n,[e,r]),t.$apply(function(){t.$emit("fuguSelectSort:change",{array:n,item:l,from:e,to:r})}),a.removeClass(u),a.removeClass(d),a.removeClass(g),a.off("drop",m)}if(null===t[i.fuguSelectSort])throw n("sort","Expected a list to sort");var o=angular.extend({axis:"horizontal"},t.$eval(i.fuguSelectSortOptions)),c=o.axis,s="dragging",u="dropping",d="dropping-before",g="dropping-after";t.$watch(function(){return l.sortable},function(e){e?a.attr("draggable",!0):a.removeAttr("draggable")}),a.on("dragstart",function(e){a.addClass(s),(e.dataTransfer||e.originalEvent.dataTransfer).setData("text/plain",t.$index)}),a.on("dragend",function(){a.removeClass(s)});var p,f=function(e,t){this.splice(t,0,this.splice(e,1)[0])},h=function(e){e.preventDefault();var t="vertical"===c?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0);t<this["vertical"===c?"offsetHeight":"offsetWidth"]/2?(a.removeClass(g),a.addClass(d)):(a.removeClass(d),a.addClass(g))},m=function(t){t.preventDefault();var n=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text/plain"),10);e.cancel(p),p=e(function(){r(n)},20)};a.on("dragenter",function(){a.hasClass(s)||(a.addClass(u),a.on("dragover",h),a.on("drop",m))}),a.on("dragleave",function(e){e.target===a&&(a.removeClass(u),a.removeClass(d),a.removeClass(g),a.off("dragover",h),a.off("drop",m))})}}}]).service("fuguSelectRepeatParser",["fuguSelectMinErr","$parse",function(e,t){var n=this;n.parse=function(n){var a=n.match(/^\s*(?:([\s\S]+?)\s+as\s+)?([\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!a)throw e("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);return{itemName:a[2],source:t(a[3]),trackByExp:a[4],modelMapper:t(a[1]||a[2])}},n.getGroupNgRepeatExpression=function(){return"$group in $select.groups"},n.getNgRepeatExpression=function(e,t,n,a){var i=e+" in "+(a?"$group.items":t);return n&&(i+=" track by "+n),i}}]),angular.module("ui.fugu.sortable",[]).service("fuguSortableService",function(){return{}}).directive("fuguSortable",["$parse","$timeout","fuguSortableService",function(e,t,n){return{restrict:"AE",scope:{fuguSortable:"="},link:function(e,a){function i(e,t,n){var a=Array.prototype.indexOf.call(t.children,e);return a>n?--a:a}function l(e,t,n){var a=e.offsetY||e.layerY,i=t.offsetHeight,l=t.offsetTop;return l=n?l:0,l+i/2>a}function r(e){var t=e.clone();return t.html(""),t.css({listStyle:"none",border:"1px dashed #CCC",minHeight:"10px",height:e[0].offsetHeight+"px",width:e[0].offsetWidth+"px",background:"transparent"}),t}var o=this;e.fuguSortable&&e.$watch("fuguSortable.length",function(){t(function(){o.refresh()},0,!1)}),o.refresh=function(){var o=a.children();o.off("dragstart dragend"),a.off("dragenter dragover drop dragleave"),angular.forEach(o,function(e,i){var l=angular.element(e);l.attr("draggable","true").css({cursor:"move"}).on("dragstart",function(o){o=o.originalEvent||o,"false"!=a.attr("draggable")&&(o.dataTransfer.effectAllowed="move",o.dataTransfer.setDragImage(e,10,10),t(function(){e.originDisplay=e.style.display,e.style.display="none"},0),n.isDragging=!0,n.dragIndex=i,n.placeholder=r(l),o.stopPropagation())}).on("dragend",function(a){a=a.originalEvent||a,t(function(){e.style.display=e.originDisplay},0),n.isDragging=!1,n.dragIndex=null,n.placeholder=null,a.stopPropagation(),a.preventDefault()})});var c,s,u=a[0];a.on("dragenter",function(e){return e=e.originalEvent||e,n.isDragging?(c=n.placeholder,s=c[0],void e.preventDefault()):!1}).on("dragover",function(e){if(e=e.originalEvent||e,!n.isDragging)return!1;if(s.parentNode!=u&&a.append(c),e.target!==u){for(var t=e.target;t.parentNode!==u&&t.parentNode;)t=t.parentNode;t.parentNode===u&&t!==s&&(l(e,t)?u.insertBefore(s,t):u.insertBefore(s,t.nextSibling))}else if(l(e,s,!0))for(;s.previousElementSibling&&(l(e,s.previousElementSibling,!0)||0===s.previousElementSibling.offsetHeight);)u.insertBefore(s,s.previousElementSibling);else for(;s.nextElementSibling&&!l(e,s.nextElementSibling,!0);)u.insertBefore(s,s.nextElementSibling.nextElementSibling);return a.addClass("fugu-sortable-dragover"),e.preventDefault(),e.stopPropagation(),!1}).on("drop",function(t){if(t=t.originalEvent||t,!n.isDragging)return!0;var l=n.dragIndex,r=i(s,u,l);return e.$apply(function(){var t=e.fuguSortable[l];e.fuguSortable.splice(l,1),e.fuguSortable.splice(r,0,t)}),c.remove(),a.removeClass("fugu-sortable-dragover"),t.stopPropagation(),!1}).on("dragleave",function(e){e=e.originalEvent||e,a.removeClass("fugu-sortable-dragover"),t(function(){a.hasClass("fugu-sortable-dragover")||c.remove()},0)})}}}}]),angular.module("ui.fugu.switch",[]).constant("fuguSwitchConfig",{type:"default",size:"md",isDisabled:!1,trueValue:!0,falseValue:!1}).controller("fuguSwitchCtrl",["$scope","$attrs","fuguSwitchConfig",function(e,t,n){function a(a,i){var l=e.$parent.$eval(t[a]);return angular.isDefined(l)?l:n[i||a]}var i={$setViewValue:angular.noop};e.switchObj={},this.init=function(t){i=t,i.$render=this.render,e.switchObj.isDisabled=a("ngDisabled","isDisabled"),e.switchObj.type=e.type||n.type,e.switchObj.size=e.size||n.size,e.switchObj.trueValue=a("trueValue"),e.switchObj.falseValue=a("falseValue")},e.$watch("switchObj.query",function(t){i.$setViewValue(t?e.switchObj.trueValue:e.switchObj.falseValue),i.$render()}),e.changeSwitchHandler=function(){e.onChange&&e.onChange()},this.render=function(){e.switchObj.query=i.$viewValue===e.switchObj.trueValue}}]).directive("fuguSwitch",function(){return{restrict:"E",templateUrl:"templates/switch.html",replace:!0,require:["fuguSwitch","ngModel"],scope:{type:"@?",size:"@?",onChange:"&?"},controller:"fuguSwitchCtrl",link:function(e,t,n,a){var i=a[0],l=a[1];i.init(l)}}}),angular.module("ui.fugu.timepicker",["ui.fugu.timepanel"]).constant("fuguTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,format:"HH:mm:ss"}).service("fuguTimepickerService",["$document",function(e){function t(e){if(n){var t=n.getTimepanelElement(),a=n.getToggleElement();t&&t[0].contains(e.target)||a&&a[0].contains(e.target)||(n.showTimepanel=!1,n.$apply())}}var n=null;this.open=function(a){n||e.on("click",t),n&&n!==a&&(n.showTimepanel=!1),n=a},this.close=function(a){n===a&&(n=null,e.off("click",t))}}]).controller("fuguTimepickerCtrl",["$scope","$element","$attrs","$parse","$log","fuguTimepickerService","fuguTimepickerConfig","dateFilter",function(e,t,n,a,i,l,r,o){var c={$setViewValue:angular.noop};this.init=function(t){c=t,c.$render=this.render,c.$formatters.unshift(function(e){return e?new Date(e):null}),e.hourStep=angular.isDefined(n.hourStep)?e.$parent.$eval(n.hourStep):r.hourStep,e.minuteStep=angular.isDefined(n.minuteStep)?e.$parent.$eval(n.minuteStep):r.minuteStep,e.secondStep=angular.isDefined(n.secondStep)?e.$parent.$eval(n.secondStep):r.secondStep};var s=this;e.showTimepanel=!1,this.toggle=function(t){e.showTimepanel=arguments.length?!!t:!e.showTimepanel},this.showTimepanel=function(){return e.showTimepanel};var u=angular.isDefined(n.format)?e.$parent.$eval(n.format):r.format;this.render=function(){var t=c.$viewValue;isNaN(t)?i.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'):t&&(e.selectedTime=t,e.inputValue=o(t,u))},e.changeTime=function(e){c.$setViewValue(e),c.$render()},e.toggleTimepanel=function(n){t.find("input")[0].blur(),n.preventDefault(),e.isDisabled||s.toggle()},e.getTimepanelElement=function(){return t.find(".fugu-timepanel")},e.getToggleElement=function(){return t.find(".input-group")},e.$watch("showTimepanel",function(t){t?l.open(e):l.close(e)}),e.$on("$locationChangeSuccess",function(){e.showTimepanel=!1})}]).directive("fuguTimepicker",function(){return{restrict:"AE",templateUrl:"templates/timepicker.html",replace:!0,require:["fuguTimepicker","ngModel"],scope:{isDisabled:"=?ngDisabled",placeholder:"@"},controller:"fuguTimepickerCtrl",link:function(e,t,n,a){
var i=a[0],l=a[1];i.init(l)}}}),angular.module("ui.fugu.tooltip",[]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t===e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,a=0;a<e.length;a++)if(t===e[a].key){n=a;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).factory("$uibPosition",["$document","$window",function(e,t){var n,a={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},i={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/};return{getRawNode:function(e){return e.nodeName?e:e[0]||e},parseStyle:function(e){return e=parseFloat(e),isFinite(e)?e:0},offsetParent:function(n){function a(e){return"static"===(t.getComputedStyle(e).position||"static")}n=this.getRawNode(n);for(var i=n.offsetParent||e[0].documentElement;i&&i!==e[0].documentElement&&a(i);)i=i.offsetParent;return i||e[0].documentElement},scrollbarWidth:function(){if(angular.isUndefined(n)){var t=angular.element('<div style="position: absolute; top: -9999px; width: 50px; height: 50px; overflow: scroll;"></div>');e.find("body").append(t),n=t[0].offsetWidth-t[0].clientWidth,n=isFinite(n)?n:0,t.remove()}return n},scrollParent:function(n,i){n=this.getRawNode(n);var l=i?a.hidden:a.normal,r=e[0].documentElement,o=t.getComputedStyle(n),c="absolute"===o.position,s=n.parentElement||r;if(s===r||"fixed"===o.position)return r;for(;s.parentElement&&s!==r;){var u=t.getComputedStyle(s);if(c&&"static"!==u.position&&(c=!1),!c&&l.test(u.overflow+u.overflowY+u.overflowX))break;s=s.parentElement}return s},position:function(n,a){n=this.getRawNode(n);var i=this.offset(n);if(a){var l=t.getComputedStyle(n);i.top-=this.parseStyle(l.marginTop),i.left-=this.parseStyle(l.marginLeft)}var r=this.offsetParent(n),o={top:0,left:0};return r!==e[0].documentElement&&(o=this.offset(r),o.top+=r.clientTop-r.scrollTop,o.left+=r.clientLeft-r.scrollLeft),{width:Math.round(angular.isNumber(i.width)?i.width:n.offsetWidth),height:Math.round(angular.isNumber(i.height)?i.height:n.offsetHeight),top:Math.round(i.top-o.top),left:Math.round(i.left-o.left)}},offset:function(n){n=this.getRawNode(n);var a=n.getBoundingClientRect();return{width:Math.round(angular.isNumber(a.width)?a.width:n.offsetWidth),height:Math.round(angular.isNumber(a.height)?a.height:n.offsetHeight),top:Math.round(a.top+(t.pageYOffset||e[0].documentElement.scrollTop)),left:Math.round(a.left+(t.pageXOffset||e[0].documentElement.scrollLeft))}},viewportOffset:function(n,a,i){n=this.getRawNode(n),i=i!==!1?!0:!1;var l=n.getBoundingClientRect(),r={top:0,left:0,bottom:0,right:0},o=a?e[0].documentElement:this.scrollParent(n),c=o.getBoundingClientRect();if(r.top=c.top+o.clientTop,r.left=c.left+o.clientLeft,o===e[0].documentElement&&(r.top+=t.pageYOffset,r.left+=t.pageXOffset),r.bottom=r.top+o.clientHeight,r.right=r.left+o.clientWidth,i){var s=t.getComputedStyle(o);r.top+=this.parseStyle(s.paddingTop),r.bottom-=this.parseStyle(s.paddingBottom),r.left+=this.parseStyle(s.paddingLeft),r.right-=this.parseStyle(s.paddingRight)}return{top:Math.round(l.top-r.top),bottom:Math.round(r.bottom-l.bottom),left:Math.round(l.left-r.left),right:Math.round(r.right-l.right)}},parsePlacement:function(e){var t=i.auto.test(e);return t&&(e=e.replace(i.auto,"")),e=e.split("-"),e[0]=e[0]||"top",i.primary.test(e[0])||(e[0]="top"),e[1]=e[1]||"center",i.secondary.test(e[1])||(e[1]="center"),t?e[2]=!0:e[2]=!1,e},positionElements:function(e,n,a,l){e=this.getRawNode(e),n=this.getRawNode(n);var r=angular.isDefined(n.offsetWidth)?n.offsetWidth:n.prop("offsetWidth"),o=angular.isDefined(n.offsetHeight)?n.offsetHeight:n.prop("offsetHeight");a=this.parsePlacement(a);var c=l?this.offset(e):this.position(e),s={top:0,left:0,placement:""};if(a[2]){var u=this.viewportOffset(e),d=t.getComputedStyle(n),g={width:r+Math.round(Math.abs(this.parseStyle(d.marginLeft)+this.parseStyle(d.marginRight))),height:o+Math.round(Math.abs(this.parseStyle(d.marginTop)+this.parseStyle(d.marginBottom)))};if(a[0]="top"===a[0]&&g.height>u.top&&g.height<=u.bottom?"bottom":"bottom"===a[0]&&g.height>u.bottom&&g.height<=u.top?"top":"left"===a[0]&&g.width>u.left&&g.width<=u.right?"right":"right"===a[0]&&g.width>u.right&&g.width<=u.left?"left":a[0],a[1]="top"===a[1]&&g.height-c.height>u.bottom&&g.height-c.height<=u.top?"bottom":"bottom"===a[1]&&g.height-c.height>u.top&&g.height-c.height<=u.bottom?"top":"left"===a[1]&&g.width-c.width>u.right&&g.width-c.width<=u.left?"right":"right"===a[1]&&g.width-c.width>u.left&&g.width-c.width<=u.right?"left":a[1],"center"===a[1])if(i.vertical.test(a[0])){var p=c.width/2-r/2;u.left+p<0&&g.width-c.width<=u.right?a[1]="left":u.right+p<0&&g.width-c.width<=u.left&&(a[1]="right")}else{var f=c.height/2-g.height/2;u.top+f<0&&g.height-c.height<=u.bottom?a[1]="top":u.bottom+f<0&&g.height-c.height<=u.top&&(a[1]="bottom")}}switch(a[0]){case"top":s.top=c.top-o;break;case"bottom":s.top=c.top+c.height;break;case"left":s.left=c.left-r;break;case"right":s.left=c.left+c.width}switch(a[1]){case"top":s.top=c.top;break;case"bottom":s.top=c.top+c.height-o;break;case"left":s.left=c.left;break;case"right":s.left=c.left+c.width-r;break;case"center":i.vertical.test(a[0])?s.left=c.left+c.width/2-r/2:s.top=c.top+c.height/2-o/2}return s.top=Math.round(s.top),s.left=Math.round(s.left),s.placement="center"===a[1]?a[0]:a[0]+"-"+a[1],s},positionArrow:function(e,n){e=this.getRawNode(e);var a=e.querySelector(".tooltip-inner, .popover-inner");if(a){var l=angular.element(a).hasClass("tooltip-inner"),r=l?e.querySelector(".tooltip-arrow"):e.querySelector(".arrow");if(r){if(n=this.parsePlacement(n),"center"===n[1])return void angular.element(r).css({top:"",bottom:"",right:"",left:"",margin:""});var o="border-"+n[0]+"-width",c=t.getComputedStyle(r)[o],s="border-";s+=i.vertical.test(n[0])?n[0]+"-"+n[1]:n[1]+"-"+n[0],s+="-radius";var u=t.getComputedStyle(l?a:e)[s],d={top:"auto",bottom:"auto",left:"auto",right:"auto",margin:0};switch(n[0]){case"top":d.bottom=l?"0":"-"+c;break;case"bottom":d.top=l?"0":"-"+c;break;case"left":d.right=l?"0":"-"+c;break;case"right":d.left=l?"0":"-"+c}d[n[1]]=u,angular.element(r).css(d)}}}}}]).controller("fuguTooltipCtrl",["$scope","$element","$compile","$attrs","$timeout","$interpolate","$uibPosition",function(e,t,n,a,i,l,r){function o(){e.trigger=e.trigger&&"hover"===e.trigger?"hover":"click",e.content=e.content||"",a.content=e.content,e.isHover=!1,e.tooltipIsOpen=e.tooltipIsOpen||!1}function c(){var e=r.positionElements(t,u,"bottom","false");r.positionArrow(u,e.placement),u.addClass("bottom"),u.css({top:e.top+"px",left:e.left+"px",visibility:"visible"}),t.after(u)}o();var s='<div class="tooltip fugu-tooltip"tooltip-animation-class="fade" uib-tooltip-classes ng-class="{in:tooltipIsOpen||isHover}"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="content"></div></div>',u=angular.element(s);u=n(u)(e),"hover"===e.trigger&&(t.on("mouseenter",function(){c(),e.isHover=!0,e.$digest()}),t.on("mouseleave",function(){c(),e.isHover=!1,e.$digest()})),e.$watch("tooltipIsOpen",function(){c()})}]).directive("fuguTooltip",function(){return{restrict:"AE",scope:{content:"@?",trigger:"@",tooltipIsOpen:"=?"},controller:"fuguTooltipCtrl",controllerAs:"tooltip"}}),angular.module("ui.fugu.tree",[]).constant("fuguTreeConfig",{showIcon:!0,checkable:!0,collapsedAll:!1,editable:!1}).controller("treeController",["$scope","$element","$attrs","fuguTreeConfig",function(e,t,n,a){function i(e){var t=0;if(e instanceof Array){for(t=0;t<e.length;t++)if(e[t].label){if(e[t].children&&e[t].children.length>0)return i(e[t].children);Object.getOwnPropertyNames(e[t]).length>1&&(l=!1)}else l=!1;return l}return!1}var l=!0;this.checkedNodes={},this.showIcon=angular.isDefined(e.showIcon)?e.showIcon:a.showIcon,this.checkable=angular.isDefined(e.checkable)?e.checkable:a.checkable,this.expandAll=angular.isDefined(e.expandAll)?!e.expandAll:a.collapsedAll,this.editable=angular.isDefined(e.editable)?e.editable:a.editable,e.nodes=i(e.$parent.$eval(n.ngModel))?e.$parent.$eval(n.ngModel):[]}]).directive("fuguTree",["fuguTreeConfig","$parse",function(){return{restrict:"AE",scope:{showIcon:"=?",checkable:"=?",expandAll:"=?",editable:"=?",onClick:"&?",onCheckChange:"&?"},replace:!0,require:["ngModel"],templateUrl:"templates/tree.html",controller:"treeController",link:function(e){var t=e.onClick(),n=e.onCheckChange();e.$on("on-click",function(e,n){angular.isDefined(t)&&t(n)}),e.$on("on-check",function(e,t){angular.isDefined(n)&&n(t)})}}}]).controller("treeNodeController",["$scope",function(e){function t(e,n){for(var a=0,i=null,l=null,r=null;a<e.length;a++)i=e.eq(a).children("div").children("div").children("input"),l=i.scope(),i.length>0&&angular.isDefined(n[l.$id])?delete n[l.$id]:(r=e.eq(a).children("div").children("ol").children("li"),r.length>0&&t(r,n))}e.preventClick=function(e){e.stopPropagation()},e.clickFn=function(t){e.$emit("on-click",t.node)},e.toggleCollapsed=function(t,n){t.stopPropagation(),n.node.children&&n.node.children.length>0&&(e.collapsed=!e.collapsed)},e.checkFn=function(t){e.$broadcast("check-change",t),e.$emit("check-change",t),e.$emit("on-check",e.treeCtrl.checkedNodes)},e.$on("check-change",function(e,n){var a=e.currentScope,i=e.targetScope,l=!(a.node.children&&a.node.children.length>0),r=!1,o=!0,c=i.$parent.$parent,s=a.treeCtrl.checkedNodes,u=0,d=null,g=!0,p=null,f=null;if(i.$id===a.$id)r=!1,o=!0;else for(o=!1;c;){if(c.$id===a.$id){r=!0;break}c=c.$parent?c.$parent.$parent:c.$parent}if(l)r||o||(e.currentScope.selected=n,e.currentScope.ele.children("div").children("input").checked=n),o&&(e.currentScope.selected=n,e.currentScope.ele.children("div").children("input").checked=n,n&&(s[e.currentScope.$id]=e.currentScope.node)),n||angular.isDefined(s[e.currentScope.$id])&&delete s[e.currentScope.$id];else if(n){if(r){for(d=a.ele.children("ol").children("li"),u=0;u<d.length;u++)if(p=d.eq(u).children("div").children("div").children("input").scope(),p.selected!==n){g=!1;break}g&&(t(d,s),a.selected=n,a.ele.children("div").children("input").checked=n,s[a.$id]=a.node)}r||o||(e.currentScope.selected=n,e.currentScope.ele.children("div").children("input").checked=n),o&&(e.currentScope.selected=n,e.currentScope.ele.children("div").children("input").checked=n,s[e.currentScope.$id]=e.currentScope.node,t(e.currentScope.ele.children("ol").children("li"),s))}else if(a.selected=n,a.ele.children("div").children("input").checked=n,angular.isDefined(s[a.$id])&&delete s[e.currentScope.$id],r)for(d=e.currentScope.ele.children("ol").children("li"),u=0;u<d.length;u++)f=d.eq(u).children("div").children("div").children("input"),f.scope().selected&&(s[f.scope().$id]=f.scope().node)})}]).directive("treeNode",["$parse","$compile",function(e,t){return{restrict:"AE",scope:{node:"="},replace:!0,require:["^fuguTree"],templateUrl:"templates/tree-node.html",controller:"treeNodeController",link:function(e,n,a,i){var l=null,r=null;e.treeCtrl=i[0],e.ele=n,e.collapsed=e.treeCtrl.expandAll,e.showIcon=e.treeCtrl.showIcon,e.checkable=e.treeCtrl.checkable,e.node.children&&e.node.children.length>0&&(l='<li ng-repeat="node in  node.children"><tree-node data-node="node"></tree-node><ol></ol></li>',r=t(l)(e),n.find("ol").append(r))}}}]),angular.module("alert/templates/alert.html",[]).run(["$templateCache",function(e){e.put("templates/alert.html",'<div ng-show="!defaultclose" class="alert fugu-alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">    <div ng-show="hasIcon" class="alert-icon">        <span class="alert-icon-span glyphicon" ng-class="\'glyphicon-\'+iconClass"></span>    </div>    <button ng-show="closeable" type="button" class="close" ng-click="closeFunc({$event: $event})">        <span ng-if="!closeText">&times;</span>        <span class="cancel-text" ng-if="closeText">{{closeText}}</span>    </button>    <!--<div ng-class="[hasIcon?\'show-icon\' : null]" ng-transclude></div>-->    <div ng-class="{true:\'show-icon\' ,false: null}[hasIcon]" ng-transclude></div></div>')}]),angular.module("buttonGroup/templates/buttonGroup.html",[]).run(["$templateCache",function(e){e.put("templates/buttonGroup.html",'<div class="btn-group">    <label class="btn  btn-default"  ng-class="[showClass, size, disabled, btn.active]" ng-repeat="btn in buttons" ng-click="clickFn(btn, $event)">{{btn.value}}</label></div>')}]),angular.module("button/templates/button.html",[]).run(["$templateCache",function(e){e.put("templates/button.html",'<button class="btn" type="{{type}}" ng-class="{\'btn-addon\': iconFlag}"><i class="glyphicon" ng-class="icon" ng-show="iconFlag"></i>{{text}}</button>')}]),angular.module("datepicker/templates/datepicker.html",[]).run(["$templateCache",function(e){e.put("templates/datepicker.html",'<div class="fugu-datepicker">    <div class="input-group">        <input type="text" ng-disabled="isDisabled" class="input-sm form-control fugu-datepicker-input" ng-click="toggleCalendarHandler($event)" placeholder="{{placeholder}}" ng-model="inputValue">        <span class="input-group-btn" ng-if="clearBtn">            <button ng-disabled="isDisabled" class="btn btn-sm btn-default fugu-datepicker-remove" type="button" ng-click="clearDateHandler($event)">                <i class="glyphicon glyphicon-remove"></i>            </button>        </span>        <span class="input-group-btn">            <button ng-disabled="isDisabled" class="btn btn-sm btn-default" type="button" ng-click="toggleCalendarHandler($event)">                <i class="glyphicon glyphicon-calendar"></i>            </button>        </span>    </div>    <fugu-calendar ng-model="selectDate" ng-if="showCalendar" on-change="changeDateHandler"                   exceptions="exceptions" min-date="minDate" max-date="maxDate"></fugu-calendar></div>')}]),angular.module("calendar/templates/calendar.html",[]).run(["$templateCache",function(e){e.put("templates/calendar.html",'<div class="fugu-calendar">    <div class="fugu-cal-panel-day" ng-show="panels.day">        <div class="fugu-cal-month">            <i class="fugu-cal-pre-button glyphicon glyphicon-chevron-left" ng-click="prevMonth()"></i>            <span class="fugu-cal-month-name">                <a href="javascript:;" ng-click="selectPanel(\'month\')">{{FORMATS.SHORTMONTH[currentMonth]}}</a>                <a href="javascript:;" ng-click="selectYearPanelHandler()">{{currentYear}}</a>            </span>            <i class="fugu-cal-next-button glyphicon glyphicon-chevron-right" ng-click="nextMonth()"></i>        </div>        <div class="fugu-cal-header clearfix">            <div ng-repeat="day in dayNames track by $index">{{day}}</div>        </div>        <div class="fugu-cal-body">            <div class="fugu-cal-row" ng-repeat="row in allDays">                <div ng-class="{\'fugu-cal-select\':day.index===currentDay,\'fugu-cal-outside\':!day.inMonth,\'fugu-cal-weekday\':day.isWeekend,\'fugu-cal-day-today\':day.isToday,\'fugu-cal-day-disabled\':day.isDisabled}"                     class="fugu-cal-day" ng-repeat="day in row" ng-click="selectDayHandler(day)">                    <span class="fugu-cal-day-inner">{{day.day}}</span>                </div>            </div>        </div>        <div class="fugu-cal-footer">            <div class="fugu-cal-time" ng-click="selectTimePanelHandler()" ng-if="showTime">                <span class="glyphicon glyphicon-time"></span>                {{selectDate | date:\'shortTime\'}}            </div>            <div class="fugu-cal-today-btn" ng-click="chooseToday()">Today</div>        </div>    </div>    <div class="fugu-cal-panel-time" ng-show="panels.time"> <!--ng-show,ng-if-->        <fugu-timepanel ng-model="selectDate"></fugu-timepanel>        <div class="btn-group clearfix">            <button class="btn btn-sm btn-default fugu-cal-time-cancal" ng-click="timePanelBack()"></button>            <button class="btn btn-sm btn-default fugu-cal-time-now" ng-click="timePanelSelectNow()"></button>            <button class="btn btn-sm btn-default fugu-cal-time-ok" ng-click="timePanelOk()"> </button>        </div>    </div>    <div class="fugu-cal-panel-month" ng-show="panels.month">        <div class="fugu-cal-month">            <span class="fugu-cal-month-name">                <a href="javascript:;" ng-click="selectYearPanelHandler()">{{currentYear}}</a>            </span>        </div>        <div class="fugu-cal-body">            <table class="fugu-cal-month-table">                <tr ng-repeat="monthRow in allMonths">                    <td class="fugu-cal-month-item"                        ng-repeat="month in monthRow"                        ng-click="chooseMonthHandler(month.index)"                        ng-class="{\'fugu-cal-month-select\':month.index === currentMonth}">                        <span class="fugu-cal-month-inner">{{month.name}}</span>                    </td>                </tr>            </table>        </div>    </div>    <div class="fugu-cal-panel-year" ng-show="panels.year">        <div class="fugu-cal-month">            <i class="fugu-cal-pre-button glyphicon glyphicon-chevron-left" ng-click="prev12Years()"></i>            <span class="fugu-cal-month-name">                <a href="javascript:;">{{allYears[0][0]}}-{{allYears[3][2]}}</a>            </span>            <i class="fugu-cal-next-button glyphicon glyphicon-chevron-right" ng-click="next12Years()"></i>        </div>        <div class="fugu-cal-body">            <table class="fugu-cal-month-table">                <tr ng-repeat="yearRow in allYears track by $index">                    <td class="fugu-cal-month-item fugu-cal-year-item"                        ng-repeat="year in yearRow track by $index"                        ng-click="chooseYearHandler(year)"                        ng-class="{\'fugu-cal-month-select\':year === currentYear}">                        <span class="fugu-cal-month-inner">{{year}}</span>                    </td>                </tr>            </table>        </div>    </div></div>')}]),angular.module("dropdown/templates/dropdown-choices.html",[]).run(["$templateCache",function(e){e.put("templates/dropdown-choices.html",'<li>    <a href="javascript:;" ng-transclude></a></li>')}]),angular.module("dropdown/templates/dropdown.html",[]).run(["$templateCache",function(e){e.put("templates/dropdown.html",'<div class="fugu-dropdown" ng-class="[{true:multiColClass}[count>colsNum],{true:openClass}[isOpen]]">    <!--<button type="button"  ng-disabled="isDisabled" class="btn btn-sm btn-primary dropdown-toggle">-->        <!--{{btnValue}}&nbsp;<span class="caret"></span>-->    <!--</button>-->    <div class="fugu-dropdown-toggle" ng-click="toggleDropdown($event)"></div>    <ul class="fugu-dropdown-menu"        ng-style="dropdownMenuStyles" ng-transclude=""></ul></div>')}]),angular.module("modal/templates/backdrop.html",[]).run(["$templateCache",function(e){e.put("templates/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"     ng-class="{in: animate}"     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"></div>')}]),angular.module("modal/templates/window.html",[]).run(["$templateCache",function(e){e.put("templates/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}">        <div class="modal-content" fugu-modal-transclude></div>    </div></div>')}]),angular.module("notification/templates/notification.html",[]).run(["$templateCache",function(e){e.put("templates/notification.html",'<div class="notice-container">    <div class="notice-item" ng-repeat="notification in notifications">        <!--<fugu-alert type="{{notification.type}}" has-icon="{{notification.disableIcon}}" close="{{!notification.disableCloseBtn}}" close-func="closeFn(notification)" class="media-heading">{{notification.text}}</fugu-alert>-->        <fugu-alert type="{{notification.type}}" has-icon="true" close="{{!notification.disableCloseBtn}}" close-func="closeFn(notification)" class="media-heading">{{notification.text}}</fugu-alert>    </div></div>')}]),angular.module("searchBox/templates/searchBox.html",[]).run(["$templateCache",function(e){e.put("templates/searchBox.html",'<div ng-class="{\'input-group\':showBtn}">    <input type="text" class="input-sm form-control" ng-keyup="keyUpToSearch($event)" placeholder="{{placeholder}}" ng-model="searchBox.query">    <span class="input-group-btn" ng-if="showBtn">        <button class="btn btn-sm btn-default" type="button" ng-click="doSearch()">{{getText()}}</button>    </span></div>')}]),angular.module("pager/templates/pager.html",[]).run(["$templateCache",function(e){e.put("templates/pager.html",'<ul class="pagination pagination-sm m-t-none m-b-none">    <li ng-class="{disabled: isFirst()}">        <a href="javascript:void(0)" ng-click="first()">{{getText(\'first\')}}</a>    </li>    <li ng-class="{disabled: isFirst()}">        <a href="javascript:void(0)" ng-click="previous()">{{getText(\'previous\')}}</a>    </li>    <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}">        <a href="javascript:void(0)" ng-click="selectPage(page.pageIndex)">{{page.pageIndex + 1}}</a>    </li>    <li ng-class="{disabled: isLast()}">        <a href="javascript:void(0)" ng-click="next()">{{getText(\'next\')}}</a>    </li>    <li ng-class="{disabled: isLast()}">        <a href="javascript:void(0)" ng-click="last()">{{getText(\'last\')}}</a>    </li>    <li class="disabled">        <a href="javascript:void(0)">{{totalPages}} / {{totalItems}}</a>    </li></ul>')}]),angular.module("select/templates/choices.html",[]).run(["$templateCache",function(e){e.put("templates/choices.html",'<ul class="fugu-select-choices fugu-select-choices-content fugu-select-dropdown dropdown-menu"    role="listbox"    ng-show="$select.items.length > 0">  <li class="fugu-select-choices-group">    <div class="divider" ng-show="$select.isGrouped && $index > 0"></div>    <div ng-show="$select.isGrouped" class="fugu-select-choices-group-label dropdown-header" ng-bind="$group.name"></div>    <div class="fugu-select-choices-row"    ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option">      <a href="javascript:void(0)" class="fugu-select-choices-row-inner"></a>    </div>  </li></ul>')}]),angular.module("select/templates/match-multiple.html",[]).run(["$templateCache",function(e){e.put("templates/match-multiple.html",'<span class="fugu-select-match">  <span ng-repeat="$item in $select.selected">    <span      class="fugu-select-match-item btn btn-default btn-xs"      tabindex="-1"      type="button"      ng-disabled="$select.disabled"      ng-click="$selectMultiple.activeMatchIndex = $index;"      ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}"      fugu-select-sort="$select.selected">        <span class="close fugu-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span>        <span fugu-transclude-append></span>    </span>  </span></span>')}]),angular.module("select/templates/match.html",[]).run(["$templateCache",function(e){e.put("templates/match.html",'<div class="fugu-select-match" ng-hide="$select.open" ng-disabled="$select.disabled" ng-class="{\'fugu-select-focus\':$select.focus}">  <span tabindex="-1"      class="btn btn-default form-control fugu-select-toggle"      aria-label="{{ $select.baseTitle }} activate"      ng-disabled="$select.disabled"      ng-click="$select.activate()">    <span ng-show="$select.isEmpty()" class="fugu-select-placeholder text-muted">{{$select.placeholder}}</span>    <span ng-hide="$select.isEmpty()" class="fugu-select-match-text pull-left" ng-class="{\'fugu-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span>    <i class="caret pull-right" ng-click="$select.toggle($event)"></i>    <a ng-show="$select.allowClear && !$select.isEmpty()" aria-label="{{ $select.baseTitle }} clear"      ng-click="$select.clear($event)" class="fugu-select-allowclear btn btn-xs btn-link pull-right">      <i class="glyphicon glyphicon-remove" aria-hidden="true"></i>    </a>  </span></div>')}]),angular.module("select/templates/select-multiple.html",[]).run(["$templateCache",function(e){e.put("templates/select-multiple.html",'<div class="fugu-select-container fugu-select-multiple fugu-select dropdown form-control" ng-class="{open: $select.open}">  <div>    <div class="fugu-select-match"></div>    <input type="text"           autocomplete="off"           autocorrect="off"           autocapitalize="off"           spellcheck="false"           class="fugu-select-search input-xs"           placeholder="{{$selectMultiple.getPlaceholder()}}"           ng-disabled="$select.disabled"           ng-hide="$select.disabled"           ng-click="$select.activate()"           ng-model="$select.search"           role="combobox"           aria-label="{{ $select.baseTitle }}"           ondrop="return false;">  </div>  <div class="fugu-select-choices"></div></div>')}]),angular.module("select/templates/select.html",[]).run(["$templateCache",function(e){e.put("templates/select.html",'<div class="fugu-select-container fugu-select dropdown" ng-class="{open: $select.open}">  <div class="fugu-select-match"></div>  <input type="text" autocomplete="off" tabindex="-1"         aria-expanded="true"         aria-label="{{ $select.baseTitle }}"         class="form-control fugu-select-search"         placeholder="{{$select.placeholder}}"         ng-model="$select.search"         ng-show="$select.searchEnabled && $select.open">  <div class="fugu-select-choices"></div></div>')}]),angular.module("switch/templates/switch.html",[]).run(["$templateCache",function(e){e.put("templates/switch.html",'<label class="fugu-switch" ng-class="[\'fugu-switch-\'+switchObj.type,\'fugu-switch-\'+switchObj.size]">    <input type="checkbox" ng-change="changeSwitchHandler()" ng-disabled="switchObj.isDisabled" ng-model="switchObj.query"/>    <i></i></label>')}]),angular.module("timepanel/templates/timepanel.html",[]).run(["$templateCache",function(e){e.put("templates/timepanel.html",'<div class="fugu-timepanel">    <div class="fugu-timepanel-col">        <div class="fugu-timepanel-top" ng-click="decrease(\'hour\',23)">{{hour | smallerValue:23:hourStep}}</div>        <div class="fugu-timepanel-middle clearfix">            <input class="fugu-timepanel-input" type="text" ng-change="changeInputValue(\'hour\',23)" ng-model="hour" placeholder="HH"/>            <span class="fugu-timepanel-label"></span>        </div>        <div class="fugu-timepanel-bottom" ng-click="increase(\'hour\',23)">{{hour | largerValue:23:hourStep}}</div>    </div>    <div class="fugu-timepanel-col">        <div class="fugu-timepanel-top" ng-click="decrease(\'minute\',59)">{{minute | smallerValue:59:minuteStep}}</div>        <div class="fugu-timepanel-middle clearfix">            <input class="fugu-timepanel-input" type="text" ng-change="changeInputValue(\'minute\',59)" ng-model="minute" placeholder="MM"/>            <span class="fugu-timepanel-label"></span>        </div>        <div class="fugu-timepanel-bottom" ng-click="increase(\'minute\',59)">{{minute | largerValue:59:minuteStep}}</div>    </div>    <div class="fugu-timepanel-col" ng-show="showSeconds">        <div class="fugu-timepanel-top" ng-click="decrease(\'second\',59)">{{second | smallerValue:59:secondStep}}</div>        <div class="fugu-timepanel-middle clearfix">            <input class="fugu-timepanel-input" type="text" ng-change="changeInputValue(\'second\',59)" ng-model="second" placeholder="SS"/>            <span class="fugu-timepanel-label"></span>        </div>        <div class="fugu-timepanel-bottom" ng-click="increase(\'second\',59)">{{second | largerValue:59:secondStep}}</div>    </div></div>')}]),angular.module("timepicker/templates/timepicker.html",[]).run(["$templateCache",function(e){e.put("templates/timepicker.html",'<div class="fugu-timepicker">    <div class="input-group">        <input type="text" ng-disabled="isDisabled" class="input-sm form-control fugu-timepicker-input" ng-click="toggleTimepanel($event)" placeholder="{{placeholder}}" ng-model="inputValue">        <span class="input-group-btn">            <button ng-disabled="isDisabled" class="btn btn-sm btn-default" type="button" ng-click="toggleTimepanel($event)">                <i class="glyphicon glyphicon-time"></i>            </button>        </span>    </div>    <fugu-timepanel hour-step="hourStep" minute-step="minuteStep" second-step="secondStep" class="fugu-timepicker-timepanel-bottom" ng-model="selectedTime" on-change="changeTime" ng-show="showTimepanel"></fugu-timepanel></div>')}]),angular.module("tree/templates/tree-node.html",[]).run(["$templateCache",function(e){e.put("templates/tree-node.html",'<div>    <div class="cur" ng-click="clickFn(this)">        <input type="checkbox" ng-model="selected" ng-change="checkFn(selected)" ng-click="preventClick($event)" ng-show="checkable"/>        <span ng-if="node.children && node.children.length > 0" ng-click="toggleCollapsed($event, this)">            <i class="glyphicon" ng-class="{\'glyphicon-folder-close\': collapsed&&showIcon, \'glyphicon-folder-open\': !collapsed&&showIcon}" ></i>        </span>        <span ng-if="!node.children || node.children.length == 0" ng-click="preventClick($event)">            <i class="glyphicon glyphicon-file" ng-show="showIcon"></i>        </span>        {{node.label}}        <span ng-show="editable">            <span class="btn btn-xs m-10-neg" ng-click="add($event, this)">                <i class="glyphicon glyphicon-plus-sign"></i>            </span>            <span class="btn btn-xs m-10-neg" ng-click="delete($event, this)">                <i class="glyphicon glyphicon-trash"></i>            </span>             <span class="btn btn-xs" ng-click="edit($event, this)">                <i class="glyphicon glyphicon-edit"></i>            </span>        </span>    </div>    <ol ng-show="!collapsed">    </ol></div>')}]),angular.module("tree/templates/tree.html",[]).run(["$templateCache",function(e){e.put("templates/tree.html",'<div class="tree">    <ol ng-show="nodes && nodes.length > 0 && !collapsedAll" class="tree-content">        <li ng-repeat="node in nodes">            <tree-node  data-node="node" ng-if="node.children && node.children.length > 0"></tree-node>            <tree-node data-node="node" ng-if="!node.children || node.children.length == 0"></tree-node>        </li>    </ol></div>')}]);